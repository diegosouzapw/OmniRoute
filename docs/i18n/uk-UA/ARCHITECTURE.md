# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ OmniRoute

üåê **Languages:** üá∫üá∏ [English](../../ARCHITECTURE.md) | üáßüá∑ [Portugu√™s (Brasil)](../pt-BR/ARCHITECTURE.md) | üá™üá∏ [Espa√±ol](../es/ARCHITECTURE.md) | üá´üá∑ [Fran√ßais](../fr/ARCHITECTURE.md) | üáÆüáπ [Italiano](../it/ARCHITECTURE.md) | üá∑üá∫ [–†—É—Å—Å–∫–∏–π](../ru/ARCHITECTURE.md) | üá®üá≥ [‰∏≠Êñá (ÁÆÄ‰Ωì)](../zh-CN/ARCHITECTURE.md) | üá©üá™ [Deutsch](../de/ARCHITECTURE.md) | üáÆüá≥ [‡§π‡§ø‡§®‡•ç‡§¶‡•Ä](../in/ARCHITECTURE.md) | üáπüá≠ [‡πÑ‡∏ó‡∏¢](../th/ARCHITECTURE.md) | üá∫üá¶ [–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞](../uk-UA/ARCHITECTURE.md) | üá∏üá¶ [ÿßŸÑÿπÿ±ÿ®Ÿäÿ©](../ar/ARCHITECTURE.md) | üáØüáµ [Êó•Êú¨Ë™û](../ja/ARCHITECTURE.md) | üáªüá≥ [Ti·∫øng Vi·ªát](../vi/ARCHITECTURE.md) | üáßüá¨ [–ë—ä–ª–≥–∞—Ä—Å–∫–∏](../bg/ARCHITECTURE.md) | üá©üá∞ [Dansk](../da/ARCHITECTURE.md) | üá´üáÆ [Suomi](../fi/ARCHITECTURE.md) | üáÆüá± [◊¢◊ë◊®◊ô◊™](../he/ARCHITECTURE.md) | üá≠üá∫ [Magyar](../hu/ARCHITECTURE.md) | üáÆüá© [Bahasa Indonesia](../id/ARCHITECTURE.md) | üá∞üá∑ [ÌïúÍµ≠Ïñ¥](../ko/ARCHITECTURE.md) | üá≤üáæ [Bahasa Melayu](../ms/ARCHITECTURE.md) | üá≥üá± [Nederlands](../nl/ARCHITECTURE.md) | üá≥üá¥ [Norsk](../no/ARCHITECTURE.md) | üáµüáπ [Portugu√™s (Portugal)](../pt/ARCHITECTURE.md) | üá∑üá¥ [Rom√¢nƒÉ](../ro/ARCHITECTURE.md) | üáµüá± [Polski](../pl/ARCHITECTURE.md) | üá∏üá∞ [Slovenƒçina](../sk/ARCHITECTURE.md) | üá∏üá™ [Svenska](../sv/ARCHITECTURE.md) | üáµüá≠ [Filipino](../phi/ARCHITECTURE.md)

_–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 2026-02-18_

## –†–µ–∑—é–º–µ

OmniRoute ‚Äî —Ü–µ –ª–æ–∫–∞–ª—å–Ω–∏–π —à–ª—é–∑ —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∞ –ø–∞–Ω–µ–ª—å, –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ –Ω–∞ Next.js.
–í—ñ–Ω –Ω–∞–¥–∞—î —î–¥–∏–Ω—É –∫—ñ–Ω—Ü–µ–≤—É —Ç–æ—á–∫—É, —Å—É–º—ñ—Å–Ω—É –∑ OpenAI (`/v1/*`), —ñ –Ω–∞–ø—Ä–∞–≤–ª—è—î —Ç—Ä–∞—Ñ—ñ–∫ –º—ñ–∂ –¥–µ–∫—ñ–ª—å–∫–æ–º–∞ –≤–∏—Ö—ñ–¥–Ω–∏–º–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞–º–∏ –∑ –ø–µ—Ä–µ–∫–ª–∞–¥–æ–º, —Ä–µ–∑–µ—Ä–≤–Ω–∏–º –≤–∞—Ä—ñ–∞–Ω—Ç–æ–º, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –º–∞—Ä–∫–µ—Ä—ñ–≤ —ñ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:

- OpenAI-—Å—É–º—ñ—Å–Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω—è API –¥–ª—è CLI/—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ (28 –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤)
- –ü–µ—Ä–µ–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—ñ–≤/–≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –º—ñ–∂ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤
- –ó–∞–ø–∞—Å–Ω–∞ –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å (–±–∞–≥–∞—Ç–æ–º–æ–¥–µ–ª—å–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å)
- –ó–∞–ø–∞—Å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –Ω–∞ —Ä—ñ–≤–Ω—ñ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É (–¥–µ–∫—ñ–ª—å–∫–∞ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –Ω–∞ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞)
- OAuth + API-–∫–ª—é—á —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `/v1/embeddings` (6 –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤, 9 –º–æ–¥–µ–ª–µ–π)
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `/v1/images/generations` (4 –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏, 9 –º–æ–¥–µ–ª–µ–π)
- –ê–Ω–∞–ª—ñ–∑ —Ç–µ–≥—ñ–≤ –º–∏—Å–ª–µ–Ω–Ω—è (`<think>...</think>`) –¥–ª—è –º–æ–¥–µ–ª–µ–π –º—ñ—Ä–∫—É–≤–∞–Ω–Ω—è
  ‚Äî –î–µ–∑—ñ–Ω—Ñ–µ–∫—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è —Å—É–≤–æ—Ä–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –∑ OpenAI SDK
  ‚Äî –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª—ñ (—Ä–æ–∑—Ä–æ–±–Ω–∏–∫‚Üí—Å–∏—Å—Ç–µ–º–∞, —Å–∏—Å—Ç–µ–º–∞‚Üí–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á) –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –º—ñ–∂ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞–º–∏
- –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ–≥–æ –≤–∏–≤–æ–¥—É (json_schema ‚Üí Gemini responseSchema)
- –õ–æ–∫–∞–ª—å–Ω–∞ –ø–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤, –∫–ª—é—á—ñ–≤, –ø—Å–µ–≤–¥–æ–Ω—ñ–º—ñ–≤, –∫–æ–º–±–æ, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å, —Ü—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è/–≤–∞—Ä—Ç–æ—Å—Ç—ñ —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤
- –î–æ–¥–∞—Ç–∫–æ–≤–∞ —Ö–º–∞—Ä–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∫—ñ–ª—å–∫–æ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤/—Å—Ç–∞–Ω—ñ–≤
  ‚Äî –°–ø–∏—Å–æ–∫ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö/—á–æ—Ä–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É –¥–æ API
- –ü—Ä–æ–¥—É–º–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±—é–¥–∂–µ—Ç–æ–º (–ø—Ä–æ—Ö—ñ–¥–Ω–∏–π/–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π/—Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π/–∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π)
- –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ —ñ–Ω'—î–∫—Ü—ñ—è –≥–ª–æ–±–∞–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ—ó —Ç–∞ –≤—ñ–¥–±–∏—Ç–∫–∏ –ø–∞–ª—å—Ü—ñ–≤
- –†–æ–∑—à–∏—Ä–µ–Ω–µ –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
- –°—Ö–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–º–∏–∫–∞—á–∞ –¥–ª—è —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ó–∞—Ö–∏—Å—Ç —Å—Ç–∞–¥–∞ –≤—ñ–¥ –≥—Ä–æ–º—É –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º –º'—é—Ç–µ–∫—Å—É
  ‚Äî –ö–µ—à –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—ñ–¥–ø–∏—Å—É
- –†—ñ–≤–µ–Ω—å –¥–æ–º–µ–Ω—É: –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –º–æ–¥–µ–ª—ñ, –ø—Ä–∞–≤–∏–ª–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ, —Ä–µ–∑–µ—Ä–≤–Ω–∞ –ø–æ–ª—ñ—Ç–∏–∫–∞, –ø–æ–ª—ñ—Ç–∏–∫–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- –ü–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å —Å—Ç–∞–Ω—É –¥–æ–º–µ–Ω—É (—Å–∫—Ä—ñ–∑–Ω–∏–π –∫–µ—à SQLite –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π, –±—é–¥–∂–µ—Ç—ñ–≤, –±–ª–æ–∫—É–≤–∞–Ω—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–∏–º–∏–∫–∞—á—ñ–≤)
- –ú–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–ª—ñ—Ç–∏–∫–∏ –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –æ—Ü—ñ–Ω–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤ (–±–ª–æ–∫—É–≤–∞–Ω–Ω—è ‚Üí –±—é–¥–∂–µ—Ç ‚Üí —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç)
- –ó–∞–ø–∏—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó –∑ –∞–≥—Ä–µ–≥–∞—Ü—ñ—î—é –∑–∞—Ç—Ä–∏–º–æ–∫ p50/p95/p99
- –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∫–æ—Ä–µ–ª—è—Ü—ñ—ó (X-Request-Id) –¥–ª—è –Ω–∞—Å–∫—Ä—ñ–∑–Ω–æ–≥–æ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è
- –ñ—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –∑ –≤—ñ–¥–º–æ–≤–æ—é –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª—é—á–∞ API
- Eval framework –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ LLM
  ‚Äî –ü–∞–Ω–µ–ª—å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É Resilience –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–º–∏–∫–∞—á–∞ –≤ —Ä–µ–∂–∏–º—ñ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É
- –ú–æ–¥—É–ª—å–Ω—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏ OAuth (12 –æ–∫—Ä–µ–º–∏—Ö –º–æ–¥—É–ª—ñ–≤ –ø—ñ–¥ `src/lib/oauth/providers/`)

–û—Å–Ω–æ–≤–Ω–∞ –º–æ–¥–µ–ª—å —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:

- –ú–∞—Ä—à—Ä—É—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–∏ Next.js –ø—ñ–¥ `src/app/api/*` —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —è–∫ API –ø–∞–Ω–µ–ª—ñ –∫–µ—Ä—É–≤–∞–Ω–Ω—è, —Ç–∞–∫ —ñ API —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- –°–ø—ñ–ª—å–Ω–µ —è–¥—Ä–æ SSE/–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó –≤ `src/sse/*` + `open-sse/*` –æ–±—Ä–æ–±–ª—è—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –ø–µ—Ä–µ–∫–ª–∞–¥, –ø–æ—Ç–æ–∫–æ–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è, –≤—ñ–¥–∫–∞—Ç —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## –û–±—Å—è–≥ —ñ –º–µ–∂—ñ

### –£ –º–µ–∂–∞—Ö

- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —à–ª—é–∑—É
- API –∫–µ—Ä—É–≤–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—é –ø–∞–Ω–µ–ª–ª—é
- –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞
- –ó–∞–ø–∏—Ç –Ω–∞ –ø–µ—Ä–µ–∫–ª–∞–¥ —ñ –ø–æ—Ç–æ–∫–æ–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è SSE
  ‚Äî –õ–æ–∫–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω + –ø–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
  ‚Äî –î–æ–¥–∞—Ç–∫–æ–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ —Ö–º–∞—Ä–æ—é

### –ü–æ–∑–∞ –º–µ–∂–∞–º–∏

- –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ö–º–∞—Ä–Ω–æ—ó —Å–ª—É–∂–±–∏ –∑–∞ `NEXT_PUBLIC_CLOUD_URL`
- –ü–ª–æ—â–∏–Ω–∞ SLA/–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –ø–æ–∑–∞ –ª–æ–∫–∞–ª—å–Ω–∏–º –ø—Ä–æ—Ü–µ—Å–æ–º
- –°–∞–º—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ –¥–≤—ñ–π–∫–æ–≤—ñ —Ñ–∞–π–ª–∏ CLI (Claude CLI, Codex CLI —Ç–æ—â–æ)

## –°–∏—Å—Ç–µ–º–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–∏—Å–æ–∫–æ–≥–æ —Ä—ñ–≤–Ω—è

```mermaid
flowchart LR
    subgraph Clients[Developer Clients]
        C1[Claude Code]
        C2[Codex CLI]
        C3[OpenClaw / Droid / Cline / Continue / Roo]
        C4[Custom OpenAI-compatible clients]
        BROWSER[Browser Dashboard]
    end

    subgraph Router[OmniRoute Local Process]
        API[V1 Compatibility API\n/v1/*]
        DASH[Dashboard + Management API\n/api/*]
        CORE[SSE + Translation Core\nopen-sse + src/sse]
        DB[(db.json)]
        UDB[(usage.json + log.txt)]
    end

    subgraph Upstreams[Upstream Providers]
        P1[OAuth Providers\nClaude/Codex/Gemini/Qwen/iFlow/GitHub/Kiro/Cursor/Antigravity]
        P2[API Key Providers\nOpenAI/Anthropic/OpenRouter/GLM/Kimi/MiniMax\nDeepSeek/Groq/xAI/Mistral/Perplexity\nTogether/Fireworks/Cerebras/Cohere/NVIDIA]
        P3[Compatible Nodes\nOpenAI-compatible / Anthropic-compatible]
    end

    subgraph Cloud[Optional Cloud Sync]
        CLOUD[Cloud Sync Endpoint\nNEXT_PUBLIC_CLOUD_URL]
    end

    C1 --> API
    C2 --> API
    C3 --> API
    C4 --> API
    BROWSER --> DASH

    API --> CORE
    DASH --> DB
    CORE --> DB
    CORE --> UDB

    CORE --> P1
    CORE --> P2
    CORE --> P3

    DASH --> CLOUD
```

## –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

## 1) API —Ç–∞ —Ä—ñ–≤–µ–Ω—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó (–º–∞—Ä—à—Ä—É—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–∏ Next.js)

–û—Å–Ω–æ–≤–Ω—ñ –∫–∞—Ç–∞–ª–æ–≥–∏:

- `src/app/api/v1/*` —Ç–∞ `src/app/api/v1beta/*` –¥–ª—è API —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- `src/app/api/*` –¥–ª—è API –∫–µ—Ä—É–≤–∞–Ω–Ω—è/–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –î–∞–ª—ñ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î –≤ `next.config.mjs` –∫–∞—Ä—Ç—É `/v1/*` –Ω–∞ `/api/v1/*`

–í–∞–∂–ª–∏–≤—ñ –º–∞—Ä—à—Ä—É—Ç–∏ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ:

- `src/app/api/v1/chat/completions/route.ts`
- `src/app/api/v1/messages/route.ts`
- `src/app/api/v1/responses/route.ts`
- `src/app/api/v1/models/route.ts` ‚Äî –≤–∫–ª—é—á–∞—î –≤–ª–∞—Å–Ω—ñ –º–æ–¥–µ–ª—ñ –∑ `custom: true`
- `src/app/api/v1/embeddings/route.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è (6 –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤)
- `src/app/api/v1/images/generations/route.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å (4+ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –≤–∫–ª. Antigravity/Nebius)
- `src/app/api/v1/messages/count_tokens/route.ts`
- `src/app/api/v1/providers/[provider]/chat/completions/route.ts` ‚Äî —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —á–∞—Ç –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- `src/app/api/v1/providers/[provider]/embeddings/route.ts` ‚Äî –≤–∏–¥—ñ–ª–µ–Ω—ñ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
- `src/app/api/v1/providers/[provider]/images/generations/route.ts` ‚Äî –≤–∏–¥—ñ–ª–µ–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
- `src/app/api/v1beta/models/route.ts`
- `src/app/api/v1beta/models/[...path]/route.ts`

–î–æ–º–µ–Ω–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è:

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è/–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è: `src/app/api/auth/*`, `src/app/api/settings/*`
- –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏/–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: `src/app/api/providers*`
- –í—É–∑–ª–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞: `src/app/api/provider-nodes*`
- –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–æ–¥–µ–ª—ñ: `src/app/api/provider-models` (GET/POST/DELETE)
- –ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π: `src/app/api/models/catalog` (GET)
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–∫—Å—ñ: `src/app/api/settings/proxy` (GET/PUT/DELETE) + `src/app/api/settings/proxy/test` (POST)
- OAuth: `src/app/api/oauth/*`
- –ö–ª—é—á—ñ/–ø—Å–µ–≤–¥–æ–Ω—ñ–º–∏/–∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó/—Ü—ñ–Ω–∏: `src/app/api/keys*`, `src/app/api/models/alias`, `src/app/api/combos*`, `src/app/api/pricing`
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: `src/app/api/usage/*`
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è/—Ö–º–∞—Ä–∞: `src/app/api/sync/*`, `src/app/api/cloud/*`
- –î–æ–ø–æ–º—ñ–∂–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ CLI: `src/app/api/cli-tools/*`
- IP-—Ñ—ñ–ª—å—Ç—Ä: `src/app/api/settings/ip-filter` (GET/PUT)
- –ë—é–¥–∂–µ—Ç –º–∏—Å–ª–µ–Ω–Ω—è: `src/app/api/settings/thinking-budget` (GET/PUT)
- –°–∏—Å—Ç–µ–º–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: `src/app/api/settings/system-prompt` (GET/PUT)
- –°–µ–∞–Ω—Å–∏: `src/app/api/sessions` (–û–¢–†–ò–ú–ê–¢–ò)
- –û–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ: `src/app/api/rate-limits` (GET)
- –°—Ç—ñ–π–∫—ñ—Å—Ç—å: `src/app/api/resilience` (GET/PATCH) ‚Äî –ø—Ä–æ—Ñ—ñ–ª—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–º–∏–∫–∞—á, –≥—Ä–∞–Ω–∏—á–Ω–∏–π —Å—Ç–∞–Ω —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- –°–∫–∏–¥–∞–Ω–Ω—è —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ: `src/app/api/resilience/reset` (POST) ‚Äî —Å–∫–∏–¥–∞–Ω–Ω—è –≤–∏–º–∏–∫–∞—á—ñ–≤ + –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à—É: `src/app/api/cache/stats` (GET/DELETE)
- –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –º–æ–¥–µ–ª—ñ: `src/app/api/models/availability` (GET/POST)
- –¢–µ–ª–µ–º–µ—Ç—Ä—ñ—è: `src/app/api/telemetry/summary` (GET)
- –ë—é–¥–∂–µ—Ç: `src/app/api/usage/budget` (GET/POST)
- –†–µ–∑–µ—Ä–≤–Ω—ñ –ª–∞–Ω—Ü—é–∂–∫–∏: `src/app/api/fallback/chains` (GET/POST/DELETE)
- –ê—É–¥–∏—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ: `src/app/api/compliance/audit-log` (GET)
- –û—Ü—ñ–Ω–∫–∏: `src/app/api/evals` (GET/POST), `src/app/api/evals/[suiteId]` (GET)
- –ü—Ä–∞–≤–∏–ª–∞: `src/app/api/policies` (GET/POST)

## 2) SSE + Translation Core

–û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ –ø–æ—Ç–æ–∫—É:

- –ó–∞–ø–∏—Å: `src/sse/handlers/chat.ts`
- –û—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∞ —è–¥—Ä–∞: `open-sse/handlers/chatCore.ts`
- –ê–¥–∞–ø—Ç–µ—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞: `open-sse/executors/*`
- –í–∏—è–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ä–º–∞—Ç—É/–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞: `open-sse/services/provider.ts`
- –†–æ–∑–±—ñ—Ä/–≤–∏—Ä—ñ—à–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ: `src/sse/services/model.ts`, `open-sse/services/model.ts`
- –†–µ–∑–µ—Ä–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É: `open-sse/services/accountFallback.ts`
- –†–µ—î—Å—Ç—Ä –ø–µ—Ä–µ–∫–ª–∞–¥—ñ–≤: `open-sse/translator/index.ts`
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø–æ—Ç–æ–∫—É: `open-sse/utils/stream.ts`, `open-sse/utils/streamHandler.ts`
- –í–∏–ª—É—á–µ–Ω–Ω—è/–Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: `open-sse/utils/usageTracking.ts`
- –†–æ–∑–±—ñ—Ä —Ç–µ–≥—ñ–≤ Think: `open-sse/utils/thinkTagParser.ts`
- –û–±—Ä–æ–±–Ω–∏–∫ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è: `open-sse/handlers/embeddings.ts`
- –†–µ—î—Å—Ç—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è: `open-sse/config/embeddingRegistry.ts`
- –û–±—Ä–æ–±–Ω–∏–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: `open-sse/handlers/imageGeneration.ts`
- –†–µ—î—Å—Ç—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω—å: `open-sse/config/imageRegistry.ts`
- –î–µ–∑—ñ–Ω—Ñ–µ–∫—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: `open-sse/handlers/responseSanitizer.ts`
- –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª—ñ: `open-sse/services/roleNormalizer.ts`

–ü–æ—Å–ª—É–≥–∏ (–±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞):

- –í–∏–±—ñ—Ä –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É/–æ—Ü—ñ–Ω–∫–∞: `open-sse/services/accountSelector.ts`
- –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç—É: `open-sse/services/contextManager.ts`
- –ü—Ä–∏–º—É—Å–æ–≤–∏–π IP-—Ñ—ñ–ª—å—Ç—Ä: `open-sse/services/ipFilter.ts`
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ—ó: `open-sse/services/sessionManager.ts`
- –ó–∞–ø–∏—Ç –Ω–∞ –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—é: `open-sse/services/signatureCache.ts`
- –°–∏—Å—Ç–µ–º–Ω–∞ –ø—ñ–¥–∫–∞–∑–∫–∞: `open-sse/services/systemPrompt.ts`
- –ü—Ä–æ–¥—É–º–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±—é–¥–∂–µ—Ç–æ–º: `open-sse/services/thinkingBudget.ts`
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –º–æ–¥–µ–ª—ñ –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–æ–∫: `open-sse/services/wildcardRouter.ts`
- –ö–µ—Ä—É–≤–∞–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ —à–≤–∏–¥–∫–æ—Å—Ç—ñ: `open-sse/services/rateLimitManager.ts`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–º–∏–∫–∞—á: `open-sse/services/circuitBreaker.ts`

–ú–æ–¥—É–ª—ñ —Ä—ñ–≤–Ω—è –¥–æ–º–µ–Ω—É:

- –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –º–æ–¥–µ–ª—ñ: `src/lib/domain/modelAvailability.ts`
- –ü—Ä–∞–≤–∏–ª–∞ –≤–∏—Ç—Ä–∞—Ç/–±—é–¥–∂–µ—Ç–∏: `src/lib/domain/costRules.ts`
- –†–µ–∑–µ—Ä–≤–Ω–∞ –ø–æ–ª—ñ—Ç–∏–∫–∞: `src/lib/domain/fallbackPolicy.ts`
- –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—á: `src/lib/domain/comboResolver.ts`
- –ü–æ–ª—ñ—Ç–∏–∫–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è: `src/lib/domain/lockoutPolicy.ts`
- –ú–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–ª—ñ—Ç–∏–∫–∏: `src/domain/policyEngine.ts` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è ‚Üí –±—é–¥–∂–µ—Ç ‚Üí —Ä–µ–∑–µ—Ä–≤–Ω–∞ –æ—Ü—ñ–Ω–∫–∞
- –ö–∞—Ç–∞–ª–æ–≥ –∫–æ–¥—ñ–≤ –ø–æ–º–∏–ª–æ–∫: `src/lib/domain/errorCodes.ts`
- –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Ç—É: `src/lib/domain/requestId.ts`
- –ß–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è: `src/lib/domain/fetchTimeout.ts`
- –ó–∞–ø–∏—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó: `src/lib/domain/requestTelemetry.ts`
- –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å/–∞—É–¥–∏—Ç: `src/lib/domain/compliance/index.ts`
- Eval runner: `src/lib/domain/evalRunner.ts`
- –ü–æ—Å—Ç—ñ–π–Ω—ñ—Å—Ç—å —Å—Ç–∞–Ω—É –¥–æ–º–µ–Ω—É: `src/lib/db/domainState.ts` ‚Äî SQLite CRUD –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –ª–∞–Ω—Ü—é–∂–∫—ñ–≤, –±—é–¥–∂–µ—Ç—ñ–≤, —ñ—Å—Ç–æ—Ä—ñ—ó –≤–∏—Ç—Ä–∞—Ç, —Å—Ç–∞–Ω—É –±–ª–æ–∫—É–≤–∞–Ω–Ω—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–∏–º–∏–∫–∞—á—ñ–≤

–ú–æ–¥—É–ª—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ OAuth (12 –æ–∫—Ä–µ–º–∏—Ö —Ñ–∞–π–ª—ñ–≤ –ø—ñ–¥ `src/lib/oauth/providers/`):

- –Ü–Ω–¥–µ–∫—Å —Ä–µ—î—Å—Ç—Ä—É: `src/lib/oauth/providers/index.ts`
- –û–∫—Ä–µ–º—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏: `claude.ts`, `codex.ts`, `gemini.ts`, `antigravity.ts`, `iflow.ts`, `qwen.ts`, `kimi-coding.ts`, `github.ts`, `kiro.ts`, `cursor.ts`, `kilocode.ts`, `cline.ts`
- –¢–æ–Ω–∫–∞ –æ–±–æ–ª–æ–Ω–∫–∞: `src/lib/oauth/providers.ts` ‚Äî —Ä–µ–µ–∫—Å–ø–æ—Ä—Ç –∑ –æ–∫—Ä–µ–º–∏—Ö –º–æ–¥—É–ª—ñ–≤

## 3) –†—ñ–≤–µ–Ω—å —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ

–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ —Å—Ç–∞–Ω—É:

- `src/lib/localDb.ts`
- —Ñ–∞–π–ª: `${DATA_DIR}/db.json` (–∞–±–æ `$XDG_CONFIG_HOME/omniroute/db.json`, —è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —ñ–Ω–∞–∫—à–µ `~/.omniroute/db.json`)
- —Å—É—Ç–Ω–æ—Å—Ç—ñ: providerConnections, providerNodes, modelAliases, combos, apiKeys, settings, pricing, **customModels**, **proxyConfig**, **ipFilter**, **thinkingBudget**, **systemPrompt**

–ë–î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

- `src/lib/usageDb.ts`
- —Ñ–∞–π–ª–∏: `${DATA_DIR}/usage.json`, `${DATA_DIR}/log.txt`, `${DATA_DIR}/call_logs/`
- –¥–æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è —Ç—ñ—î—ó –∂ –±–∞–∑–æ–≤–æ—ó –ø–æ–ª—ñ—Ç–∏–∫–∏ –∫–∞—Ç–∞–ª–æ–≥—É, —â–æ –π `localDb` (`DATA_DIR`, –ø–æ—Ç—ñ–º `XDG_CONFIG_HOME/omniroute`, —è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
- —Ä–æ–∑–∫–ª–∞–¥–µ–Ω–æ –Ω–∞ –ø—ñ–¥–º–æ–¥—É–ª—ñ: `migrations.ts`, `usageHistory.ts`, `costCalculator.ts`, `usageStats.ts`, `callLogs.ts`

–ë–î —Å—Ç–∞–Ω—É –¥–æ–º–µ–Ω—É (SQLite):

- `src/lib/db/domainState.ts` ‚Äî –æ–ø–µ—Ä–∞—Ü—ñ—ó CRUD –¥–ª—è —Å—Ç–∞–Ω—É –¥–æ–º–µ–Ω—É
- –¢–∞–±–ª–∏—Ü—ñ (—Å—Ç–≤–æ—Ä–µ–Ω—ñ –≤ `src/lib/db/core.ts`): `domain_fallback_chains`, `domain_budgets`, `domain_cost_history`, `domain_lockout_state`, `domain_circuit_breakers`
- –®–∞–±–ª–æ–Ω –∫–µ—à—É –Ω–∞—Å–∫—Ä—ñ–∑–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É: –ö–∞—Ä—Ç–∏ –≤ –ø–∞–º'—è—Ç—ñ —î –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è; –º—É—Ç–∞—Ü—ñ—ó –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ SQLite; —Å—Ç–∞–Ω –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑ –ë–î –ø—Ä–∏ —Ö–æ–ª–æ–¥–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É

## 4) Auth + Security Surfaces

- –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤ cookie —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ: `src/proxy.ts`, `src/app/api/auth/login/route.ts`
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è/–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–ª—é—á–∞ API: `src/shared/utils/apiKey.ts`
- –°–µ–∫—Ä–µ—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `providerConnections` –∑–∞–ø–∏—Å–∞—Ö
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –ø—Ä–æ–∫—Å—ñ-—Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ `open-sse/utils/proxyFetch.ts` (env vars) —ñ `open-sse/utils/networkProxy.ts` (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –∞–±–æ –≥–ª–æ–±–∞–ª—å–Ω–æ)

## 5) –•–º–∞—Ä–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞: `src/lib/initCloudSync.ts`, `src/shared/services/initializeCloudSync.ts`
- –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è: `src/shared/services/cloudSyncScheduler.ts`
- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç: `src/app/api/sync/cloud/route.ts`

## –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –∑–∞–ø–∏—Ç—É (`/v1/chat/completions`)

```mermaid
sequenceDiagram
    autonumber
    participant Client as CLI/SDK Client
    participant Route as /api/v1/chat/completions
    participant Chat as src/sse/handlers/chat
    participant Core as open-sse/handlers/chatCore
    participant Model as Model Resolver
    participant Auth as Credential Selector
    participant Exec as Provider Executor
    participant Prov as Upstream Provider
    participant Stream as Stream Translator
    participant Usage as usageDb

    Client->>Route: POST /v1/chat/completions
    Route->>Chat: handleChat(request)
    Chat->>Model: parse/resolve model or combo

    alt Combo model
        Chat->>Chat: iterate combo models (handleComboChat)
    end

    Chat->>Auth: getProviderCredentials(provider)
    Auth-->>Chat: active account + tokens/api key

    Chat->>Core: handleChatCore(body, modelInfo, credentials)
    Core->>Core: detect source format
    Core->>Core: translate request to target format
    Core->>Exec: execute(provider, transformedBody)
    Exec->>Prov: upstream API call
    Prov-->>Exec: SSE/JSON response
    Exec-->>Core: response + metadata

    alt 401/403
        Core->>Exec: refreshCredentials()
        Exec-->>Core: updated tokens
        Core->>Exec: retry request
    end

    Core->>Stream: translate/normalize stream to client format
    Stream-->>Client: SSE chunks / JSON response

    Stream->>Usage: extract usage + persist history/log
```

## Combo + –ü–æ—Ç—ñ–∫ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É

```mermaid
flowchart TD
    A[Incoming model string] --> B{Is combo name?}
    B -- Yes --> C[Load combo models sequence]
    B -- No --> D[Single model path]

    C --> E[Try model N]
    E --> F[Resolve provider/model]
    D --> F

    F --> G[Select account credentials]
    G --> H{Credentials available?}
    H -- No --> I[Return provider unavailable]
    H -- Yes --> J[Execute request]

    J --> K{Success?}
    K -- Yes --> L[Return response]
    K -- No --> M{Fallback-eligible error?}

    M -- No --> N[Return error]
    M -- Yes --> O[Mark account unavailable cooldown]
    O --> P{Another account for provider?}
    P -- Yes --> G
    P -- No --> Q{In combo with next model?}
    Q -- Yes --> E
    Q -- No --> R[Return all unavailable]
```

–†–µ–∑–µ—Ä–≤–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –∫–µ—Ä—É—é—Ç—å—Å—è `open-sse/services/accountFallback.ts` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–¥—ñ–≤ —Å—Ç–∞–Ω—É —Ç–∞ –µ–≤—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏.

## –í–≤–µ–¥–µ–Ω–Ω—è OAuth —ñ –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä—ñ–≤

```mermaid
sequenceDiagram
    autonumber
    participant UI as Dashboard UI
    participant OAuth as /api/oauth/[provider]/[action]
    participant ProvAuth as Provider Auth Server
    participant DB as localDb
    participant Test as /api/providers/[id]/test
    participant Exec as Provider Executor

    UI->>OAuth: GET authorize or device-code
    OAuth->>ProvAuth: create auth/device flow
    ProvAuth-->>OAuth: auth URL or device code payload
    OAuth-->>UI: flow data

    UI->>OAuth: POST exchange or poll
    OAuth->>ProvAuth: token exchange/poll
    ProvAuth-->>OAuth: access/refresh tokens
    OAuth->>DB: createProviderConnection(oauth data)
    OAuth-->>UI: success + connection id

    UI->>Test: POST /api/providers/[id]/test
    Test->>Exec: validate credentials / optional refresh
    Exec-->>Test: valid or refreshed token info
    Test->>DB: update status/tokens/errors
    Test-->>UI: validation result
```

–û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ–¥ —á–∞—Å –∂–∏–≤–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `open-sse/handlers/chatCore.ts` —á–µ—Ä–µ–∑ –≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å `refreshCredentials()`.

## –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª Cloud Sync (–£–≤—ñ–º–∫–Ω—É—Ç–∏ / –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ / –í–∏–º–∫–Ω—É—Ç–∏)

```mermaid
sequenceDiagram
    autonumber
    participant UI as Endpoint Page UI
    participant Sync as /api/sync/cloud
    participant DB as localDb
    participant Cloud as External Cloud Sync
    participant Claude as ~/.claude/settings.json

    UI->>Sync: POST action=enable
    Sync->>DB: set cloudEnabled=true
    Sync->>DB: ensure API key exists
    Sync->>Cloud: POST /sync/{machineId} (providers/aliases/combos/keys)
    Cloud-->>Sync: sync result
    Sync->>Cloud: GET /{machineId}/v1/verify
    Sync-->>UI: enabled + verification status

    UI->>Sync: POST action=sync
    Sync->>Cloud: POST /sync/{machineId}
    Cloud-->>Sync: remote data
    Sync->>DB: update newer local tokens/status
    Sync-->>UI: synced

    UI->>Sync: POST action=disable
    Sync->>DB: set cloudEnabled=false
    Sync->>Cloud: DELETE /sync/{machineId}
    Sync->>Claude: switch ANTHROPIC_BASE_URL back to local (if needed)
    Sync-->>UI: disabled
```

–ü–µ—Ä—ñ–æ–¥–∏—á–Ω—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é –∑–∞–ø—É—Å–∫–∞—î `CloudSyncScheduler`, –∫–æ–ª–∏ —Ö–º–∞—Ä—É –≤–≤—ñ–º–∫–Ω–µ–Ω–æ.

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö —ñ –∫–∞—Ä—Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è

```mermaid
erDiagram
    SETTINGS ||--o{ PROVIDER_CONNECTION : controls
    PROVIDER_NODE ||--o{ PROVIDER_CONNECTION : backs_compatible_provider
    PROVIDER_CONNECTION ||--o{ USAGE_ENTRY : emits_usage

    SETTINGS {
      boolean cloudEnabled
      number stickyRoundRobinLimit
      boolean requireLogin
      string password_hash
      string fallbackStrategy
      json rateLimitDefaults
      json providerProfiles
    }

    PROVIDER_CONNECTION {
      string id
      string provider
      string authType
      string name
      number priority
      boolean isActive
      string apiKey
      string accessToken
      string refreshToken
      string expiresAt
      string testStatus
      string lastError
      string rateLimitedUntil
      json providerSpecificData
    }

    PROVIDER_NODE {
      string id
      string type
      string name
      string prefix
      string apiType
      string baseUrl
    }

    MODEL_ALIAS {
      string alias
      string targetModel
    }

    COMBO {
      string id
      string name
      string[] models
    }

    API_KEY {
      string id
      string name
      string key
      string machineId
    }

    USAGE_ENTRY {
      string provider
      string model
      number prompt_tokens
      number completion_tokens
      string connectionId
      string timestamp
    }

    CUSTOM_MODEL {
      string id
      string name
      string providerId
    }

    PROXY_CONFIG {
      string global
      json providers
    }

    IP_FILTER {
      string mode
      string[] allowlist
      string[] blocklist
    }

    THINKING_BUDGET {
      string mode
      number customBudget
      string effortLevel
    }

    SYSTEM_PROMPT {
      boolean enabled
      string prompt
      string position
    }
```

–§–∞–π–ª–∏ —Ñ—ñ–∑–∏—á–Ω–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è:

- –æ—Å–Ω–æ–≤–Ω–∏–π —Å—Ç–∞–Ω: `${DATA_DIR}/db.json` (–∞–±–æ `$XDG_CONFIG_HOME/omniroute/db.json`, —è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —ñ–Ω–∞–∫—à–µ `~/.omniroute/db.json`)
- —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: `${DATA_DIR}/usage.json`
- —Ä—è–¥–∫–∏ –∂—É—Ä–Ω–∞–ª—É –∑–∞–ø–∏—Ç—ñ–≤: `${DATA_DIR}/log.txt`
- –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á/—Å–µ–∞–Ω—Å–∏ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤: `<repo>/logs/...`

## –¢–æ–ø–æ–ª–æ–≥—ñ—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

```mermaid
flowchart LR
    subgraph LocalHost[Developer Host]
        CLI[CLI Tools]
        Browser[Dashboard Browser]
    end

    subgraph ContainerOrProcess[OmniRoute Runtime]
        Next[Next.js Server\nPORT=20128]
        Core[SSE Core + Executors]
        MainDB[(db.json)]
        UsageDB[(usage.json/log.txt)]
    end

    subgraph External[External Services]
        Providers[AI Providers]
        SyncCloud[Cloud Sync Service]
    end

    CLI --> Next
    Browser --> Next
    Next --> Core
    Next --> MainDB
    Core --> MainDB
    Core --> UsageDB
    Core --> Providers
    Next --> SyncCloud
```

## –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤ (–≤–∞–∂–ª–∏–≤–æ –¥–ª—è –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω—å)

### –ú–æ–¥—É–ª—ñ –º–∞—Ä—à—Ä—É—Ç—É —Ç–∞ API

- `src/app/api/v1/*`, `src/app/api/v1beta/*`: API —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- `src/app/api/v1/providers/[provider]/*`: –≤–∏–¥—ñ–ª–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ (—á–∞—Ç, –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
- `src/app/api/providers*`: CRUD –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- `src/app/api/provider-nodes*`: –Ω–∞—Å—Ç—Ä–æ—é–≤–∞–Ω–µ —Å—É–º—ñ—Å–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤—É–∑–ª–æ–º
- `src/app/api/provider-models`: –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –º–æ–¥–µ–ª–ª—é (CRUD)
- `src/app/api/models/catalog`: API –∫–∞—Ç–∞–ª–æ–≥—É –ø–æ–≤–Ω–æ—ó –º–æ–¥–µ–ª—ñ (—É—Å—ñ —Ç–∏–ø–∏ –∑–≥—Ä—É–ø–æ–≤–∞–Ω—ñ –∑–∞ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–æ–º)
- `src/app/api/oauth/*`: –ø–æ—Ç–æ–∫–∏ OAuth/–∫–æ–¥ –ø—Ä–∏—Å—Ç—Ä–æ—é
- `src/app/api/keys*`: –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ API
- `src/app/api/models/alias`: –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Å–µ–≤–¥–æ–Ω—ñ–º–∞–º–∏
- `src/app/api/combos*`: —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–º–±–æ
- `src/app/api/pricing`: –∑–∞–º—ñ–Ω–∞ —Ü—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –≤–∞—Ä—Ç–æ—Å—Ç—ñ
- `src/app/api/settings/proxy`: –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–∫—Å—ñ (GET/PUT/DELETE)
- `src/app/api/settings/proxy/test`: —Ç–µ—Å—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –ø—Ä–æ–∫—Å—ñ (POST)
- `src/app/api/usage/*`: API –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –∂—É—Ä–Ω–∞–ª—ñ–≤
- `src/app/api/sync/*` + `src/app/api/cloud/*`: —Ö–º–∞—Ä–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ç–∞ –ø–æ–º—ñ—á–Ω–∏–∫–∏ –≤ —Ö–º–∞—Ä—ñ
- `src/app/api/cli-tools/*`: –ª–æ–∫–∞–ª—å–Ω—ñ –∞–≤—Ç–æ—Ä–∏/–ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó CLI
- `src/app/api/settings/ip-filter`: —Å–ø–∏—Å–æ–∫ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö/—á–æ—Ä–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å (GET/PUT)
- `src/app/api/settings/thinking-budget`: –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±—é–¥–∂–µ—Ç—É –º–∞—Ä–∫–µ—Ä–∞ –º–∏—Å–ª–µ–Ω–Ω—è (GET/PUT)
- `src/app/api/settings/system-prompt`: –≥–ª–æ–±–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∞ –ø—ñ–¥–∫–∞–∑–∫–∞ (GET/PUT)
- `src/app/api/sessions`: —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö —Å–µ–∞–Ω—Å—ñ–≤ (GET)
- `src/app/api/rate-limits`: —Å—Ç–∞—Ç—É—Å –ª—ñ–º—ñ—Ç—É —Å—Ç–∞–≤–∫–∏ –Ω–∞ –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å (GET)

### –Ø–¥—Ä–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

- `src/sse/handlers/chat.ts`: —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Ç—É, –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞, —Ü–∏–∫–ª –≤–∏–±–æ—Ä—É –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É
- `open-sse/handlers/chatCore.ts`: –ø–µ—Ä–µ–∫–ª–∞–¥, —Ä–æ–∑—Å–∏–ª–∫–∞ –≤–∏–∫–æ–Ω–∞–≤—Ü—è, –æ–±—Ä–æ–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—ñ–≤/–æ–Ω–æ–≤–ª–µ–Ω—å, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É
- `open-sse/executors/*`: –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –º–µ—Ä–µ–∂—ñ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞

### –†–µ—î—Å—Ç—Ä –ø–µ—Ä–µ–∫–ª–∞–¥—ñ–≤ —ñ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∏ —Ñ–æ—Ä–º–∞—Ç—ñ–≤

- `open-sse/translator/index.ts`: —Ä–µ—î—Å—Ç—Ä –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á—ñ–≤ —ñ –æ—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∞
- –ó–∞–ø–∏—Ç –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á—ñ–≤: `open-sse/translator/request/*`
- –ü–µ—Ä–µ–∫–ª–∞–¥–∞—á—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: `open-sse/translator/response/*`
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É: `open-sse/translator/formats.ts`

### –ù–∞–ø–æ–ª–µ–≥–ª–∏–≤—ñ—Å—Ç—å

- `src/lib/localDb.ts`: –ø–æ—Å—Ç—ñ–π–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è/—Å—Ç–∞–Ω
- `src/lib/usageDb.ts`: —ñ—Å—Ç–æ—Ä—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞ –∂—É—Ä–Ω–∞–ª–∏ –ø–æ—Ç–æ—á–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

## –ü–æ–∫—Ä–∏—Ç—Ç—è –≤–∏–∫–æ–Ω–∞–≤—Ü—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ (—à–∞–±–ª–æ–Ω —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó)

–ö–æ–∂–µ–Ω –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ –º–∞—î —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å, —â–æ —Ä–æ–∑—à–∏—Ä—é—î `BaseExecutor` (—É `open-sse/executors/base.ts`), —è–∫–∏–π –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–±—É–¥–æ–≤—É URL-–∞–¥—Ä–µ—Å–∏, –ø–æ–±—É–¥–æ–≤—É –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø–æ–≤—Ç–æ—Ä–Ω—É —Å–ø—Ä–æ–±—É –∑ –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ—é –≤—ñ–¥—Å—Ç—Ä–æ—á–∫–æ—é, –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—á—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö —ñ –º–µ—Ç–æ–¥ –æ—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∏ `execute()`.

| –í–∏–∫–æ–Ω–∞–≤–µ—Ü—å            | –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫(–∏)                                                                                                                                              | –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞                                                            |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------- |
| `DefaultExecutor`     | OpenAI, Claude, Gemini, Qwen, iFlow, OpenRouter, GLM, Kimi, MiniMax, DeepSeek, Groq, xAI, Mistral, Perplexity, Together, Fireworks, Cerebras, Cohere, NVIDIA | –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ—ó URL-–∞–¥—Ä–µ—Å–∏/–∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞        |
| `AntigravityExecutor` | –ê–Ω—Ç–∏–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ—è Google                                                                                                                                        | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤/—Å–µ–∞–Ω—Å—ñ–≤, –ø–æ–≤—Ç–æ—Ä–Ω–∞ —Å–ø—Ä–æ–±–∞ –ø—ñ—Å–ª—è –∞–Ω–∞–ª—ñ–∑—É |
| `CodexExecutor`       | OpenAI Codex                                                                                                                                                 | –í–ø—Ä–æ–≤–∞–¥–∂—É—î —Å–∏—Å—Ç–µ–º–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, –∑–º—É—à—É—î –º—ñ—Ä–∫—É–≤–∞—Ç–∏                              |
| `CursorExecutor`      | –ö—É—Ä—Å–æ—Ä IDE                                                                                                                                                   | –ü—Ä–æ—Ç–æ–∫–æ–ª ConnectRPC, –∫–æ–¥—É–≤–∞–Ω–Ω—è Protobuf, –ø—ñ–¥–ø–∏—Å –∑–∞–ø–∏—Ç—É —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É —Å—É–º—É  |
| `GithubExecutor`      | –ö–æ–ø—ñ–ª–æ—Ç GitHub                                                                                                                                               | –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞ Copilot, –∑–∞–≥–æ–ª–æ–≤–∫–∏, —â–æ —ñ–º—ñ—Ç—É—é—Ç—å VSCode                      |
| `KiroExecutor`        | AWS CodeWhisperer/Kiro                                                                                                                                       | –î–≤—ñ–π–∫–æ–≤–∏–π —Ñ–æ—Ä–º–∞—Ç AWS EventStream ‚Üí –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è SSE                           |
| `GeminiCLIExecutor`   | Gemini CLI                                                                                                                                                   | –¶–∏–∫–ª –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞ Google OAuth                                           |

–£—Å—ñ —ñ–Ω—à—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏ (–≤–∫–ª—é—á–Ω–æ –∑ –Ω–∞—Å—Ç—Ä–æ—é–≤–∞–Ω–∏–º–∏ —Å—É–º—ñ—Å–Ω–∏–º–∏ –≤—É–∑–ª–∞–º–∏) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `DefaultExecutor`.

## –ú–∞—Ç—Ä–∏—Ü—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤

| –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫     | –§–æ—Ä–º–∞—Ç           | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è            | –ü–æ—Ç—ñ–∫            | –ù–µ–ø–æ—Ç–æ–∫–æ–≤–∏–π | –¢–æ–∫–µ–Ω –û–Ω–æ–≤–∏—Ç–∏ | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API          |
| ---------------- | ---------------- | ---------------------- | ---------------- | ----------- | ------------- | ------------------------- |
| –ö–ª–æ–¥             | –ö–ª–æ–¥             | –ö–ª—é—á API / OAuth       | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚ö†Ô∏è –õ–∏—à–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä     |
| –ë–ª–∏–∑–Ω—é–∫–∏         | –±–ª–∏–∑–Ω—é–∫–∏         | –ö–ª—é—á API / OAuth       | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚ö†Ô∏è –•–º–∞—Ä–Ω–∞ –∫–æ–Ω—Å–æ–ª—å         |
| Gemini CLI       | gemini-cli       | OAuth                  | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚ö†Ô∏è –•–º–∞—Ä–Ω–∞ –∫–æ–Ω—Å–æ–ª—å         |
| –ê–Ω—Ç–∏–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ—è   | –∞–Ω—Ç–∏–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ—è   | OAuth                  | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚úÖ –ü–æ–≤–Ω–∞ –∫–≤–æ—Ç–∞ API        |
| OpenAI           | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –ö–æ–¥–µ–∫—Å           | openai-–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ | OAuth                  | ‚úÖ –ø—Ä–∏–º—É—Å–æ–≤–∏–π    | ‚ùå          | ‚úÖ            | ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞—Ä–∏—Ñ—ñ–≤      |
| –ö–æ–ø—ñ–ª–æ—Ç GitHub   | openai           | OAuth + Copilot Token  | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚úÖ –ó–Ω—ñ–º–∫–∏ –∫–≤–æ—Ç            |
| –ö—É—Ä—Å–æ—Ä           | –∫—É—Ä—Å–æ—Ä           | –í–ª–∞—Å–Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ —Å—É–º–∞ | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –ö—ñ—Ä–æ             | kiro             | AWS SSO OIDC           | ‚úÖ (EventStream) | ‚ùå          | ‚úÖ            | ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è |
| –ö–≤–µ–Ω             | openai           | OAuth                  | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚ö†Ô∏è –ó–∞ –∑–∞–ø–∏—Ç–æ–º             |
| iFlow            | openai           | OAuth (–±–∞–∑–æ–≤–∏–π)        | ‚úÖ               | ‚úÖ          | ‚úÖ            | ‚ö†Ô∏è –ó–∞ –∑–∞–ø–∏—Ç–æ–º             |
| OpenRouter       | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| GLM/Kimi/MiniMax | –ö–ª–æ–¥             | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| DeepSeek         | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| Groq             | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| xAI (–ì—Ä–æ–∫)       | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –ú—ñ—Å—Ç—Ä–∞–ª—å         | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –†–æ–∑–≥—É–±–ª–µ–Ω—ñ—Å—Ç—å    | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –†–∞–∑–æ–º AI         | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –§–µ—î—Ä–≤–µ—Ä–∫ AI      | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| –ì–æ–ª–æ–≤–Ω–∏–π –º–æ–∑–æ–∫   | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| Cohere           | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |
| NVIDIA NIM       | openai           | –ö–ª—é—á API               | ‚úÖ               | ‚úÖ          | ‚ùå            | ‚ùå                        |

## –ü–æ–∫—Ä–∏—Ç—Ç—è –ø–µ—Ä–µ–∫–ª–∞–¥—É —Ñ–æ—Ä–º–∞—Ç—É

–í–∏—è–≤–ª–µ–Ω—ñ –≤–∏—Ö—ñ–¥–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å:

- `openai`
- `openai-responses`
- `claude`
- `gemini`

–¶—ñ–ª—å–æ–≤—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å:

- –ß–∞—Ç/–í—ñ–¥–ø–æ–≤—ñ–¥—ñ OpenAI
- –ö–ª–æ–¥
- Gemini/Gemini-CLI/–ê–Ω—Ç–∏–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ–π–Ω–∞ –æ–±–æ–ª–æ–Ω–∫–∞
- –ö—ñ—Ä–æ
- –ö—É—Ä—Å–æ—Ä

–î–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **OpenAI —è–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç** ‚Äî —É—Å—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ OpenAI —è–∫ –ø—Ä–æ–º—ñ–∂–Ω–∏–π:

```
Source Format ‚Üí OpenAI (hub) ‚Üí Target Format
```

–ü–µ—Ä–µ–∫–ª–∞–¥–∏ –≤–∏–±–∏—Ä–∞—é—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ñ–æ—Ä–º–∏ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å–Ω–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ —Ü—ñ–ª—å–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞.

–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä—ñ–≤–Ω—ñ –æ–±—Ä–æ–±–∫–∏ –≤ –∫–æ–Ω–≤–µ—î—Ä—ñ –ø–µ—Ä–µ–∫–ª–∞–¥—É:

- **–î–µ–∑—ñ–Ω—Ñ—ñ–∫–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** ‚Äî –≤–∏–¥–∞–ª—è—î –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø–æ–ª—è –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —É —Ñ–æ—Ä–º–∞—Ç—ñ OpenAI (—è–∫ –ø–æ—Ç–æ–∫–æ–≤–∏—Ö, —Ç–∞–∫ —ñ –Ω–µ –ø–æ—Ç–æ–∫–æ–≤–∏—Ö), —â–æ–± –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —Å—É–≤–æ—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å SDK
- **–ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–æ–ª—ñ** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î `developer` ‚Üí `system` –¥–ª—è —Ü—ñ–ª–µ–π, —â–æ –Ω–µ —î OpenAI; –æ–±‚Äô—î–¥–Ω—É—î `system` ‚Üí `user` –¥–ª—è –º–æ–¥–µ–ª–µ–π, —è–∫—ñ –≤—ñ–¥—Ö–∏–ª—è—é—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É —Ä–æ–ª—å (GLM, ERNIE)
- **–í–∏–ª—É—á–µ–Ω–Ω—è —Ç–µ–≥—ñ–≤ –º–∏—Å–ª–µ–Ω–Ω—è** ‚Äî –∞–Ω–∞–ª—ñ–∑—É—î –±–ª–æ–∫–∏ `<think>...</think>` –∑ –≤–º—ñ—Å—Ç—É –≤ –ø–æ–ª–µ `reasoning_content`
- **–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –≤–∏—Ö—ñ–¥** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î OpenAI `response_format.json_schema` –Ω–∞ `responseMimeType` + `responseSchema` Gemini

## –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ API

| –ö—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞                                      | –§–æ—Ä–º–∞—Ç                | –û–±—Ä–æ–±–Ω–∏–∫                                                          |
| -------------------------------------------------- | --------------------- | ----------------------------------------------------------------- |
| `POST /v1/chat/completions`                        | –ß–∞—Ç OpenAI            | `src/sse/handlers/chat.ts`                                        |
| `POST /v1/messages`                                | –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ö–ª–æ–¥–∞    | –¢–æ–π —Å–∞–º–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ (–≤–∏–∑–Ω–∞—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)                        |
| `POST /v1/responses`                               | –í—ñ–¥–ø–æ–≤—ñ–¥—ñ OpenAI      | `open-sse/handlers/responsesHandler.ts`                           |
| `POST /v1/embeddings`                              | –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è OpenAI   | `open-sse/handlers/embeddings.ts`                                 |
| `GET /v1/embeddings`                               | –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π        | –ú–∞—Ä—à—Ä—É—Ç API                                                       |
| `POST /v1/images/generations`                      | –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è OpenAI     | `open-sse/handlers/imageGeneration.ts`                            |
| `GET /v1/images/generations`                       | –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π        | –ú–∞—Ä—à—Ä—É—Ç API                                                       |
| `POST /v1/providers/{provider}/chat/completions`   | –ß–∞—Ç OpenAI            | –í–∏–¥—ñ–ª–µ–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –º–æ–¥–µ–ª—ñ            |
| `POST /v1/providers/{provider}/embeddings`         | –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è OpenAI   | –í–∏–¥—ñ–ª–µ–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –º–æ–¥–µ–ª—ñ            |
| `POST /v1/providers/{provider}/images/generations` | –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è OpenAI     | –í–∏–¥—ñ–ª–µ–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –º–æ–¥–µ–ª—ñ            |
| `POST /v1/messages/count_tokens`                   | –ö–ª–æ–¥ –¢–æ–∫–µ–Ω –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ | –ú–∞—Ä—à—Ä—É—Ç API                                                       |
| `GET /v1/models`                                   | –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π OpenAI | –ú–∞—Ä—à—Ä—É—Ç API (—á–∞—Ç + –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è + –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è + —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–æ–¥–µ–ª—ñ) |
| `GET /api/models/catalog`                          | –ö–∞—Ç–∞–ª–æ–≥               | –£—Å—ñ –º–æ–¥–µ–ª—ñ –∑–≥—Ä—É–ø–æ–≤–∞–Ω—ñ –∑–∞ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–æ–º + —Ç–∏–ø                     |
| `POST /v1beta/models/*:streamGenerateContent`      | –ë–ª–∏–∑–Ω—é–∫–∏ —Ä—ñ–¥–Ω—ñ        | –ú–∞—Ä—à—Ä—É—Ç API                                                       |
| `GET/PUT/DELETE /api/settings/proxy`               | –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–∫—Å—ñ   | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ—Ä–µ–∂–µ–≤–æ–≥–æ –ø—Ä–æ–∫—Å—ñ                                    |
| `POST /api/settings/proxy/test`                    | –ó'—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–æ–∫—Å—ñ      | –ö—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—ñ/–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–æ–∫—Å—ñ               |
| `GET/POST/DELETE /api/provider-models`             | –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–æ–¥–µ–ª—ñ     | –ö–µ—Ä—É–≤–∞–Ω–Ω—è —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ—é –º–æ–¥–µ–ª–ª—é –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞        |

## –û–±—Ö—ñ–¥–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫

–û–±—Ö—ñ–¥–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ (`open-sse/utils/bypassHandler.ts`) –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –≤—ñ–¥–æ–º—ñ –∑–∞–ø–∏—Ç–∏ –Ω–∞ ¬´–≤–∏–∫–∏–¥–∞–Ω–Ω—è¬ª –≤—ñ–¥ Claude CLI ‚Äî –ø—ñ–Ω–≥ —Ä–æ–∑—ñ–≥—Ä—ñ–≤—É, –≤–∏–ª—É—á–µ–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ —ñ –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Ç–æ–∫–µ–Ω—ñ–≤ ‚Äî —ñ –ø–æ–≤–µ—Ä—Ç–∞—î **–ø—ñ–¥—Ä–æ–±–ª–µ–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å**, –Ω–µ —Å–ø–æ–∂–∏–≤–∞—é—á–∏ —Ç–æ–∫–µ–Ω–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –≤–∏—â–µ—Å—Ç–æ—è—â–∏—Ö –¥–∞–Ω–∏—Ö. –¶–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ `User-Agent` –º—ñ—Å—Ç–∏—Ç—å `claude-cli`.

## –ö–æ–Ω–≤–µ—î—Ä —Ä–µ—î—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑–∞–ø–∏—Ç—ñ–≤

–†–µ—î—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–ø–∏—Ç—ñ–≤ (`open-sse/utils/requestLogger.ts`) –∑–∞–±–µ–∑–ø–µ—á—É—î 7-–µ—Ç–∞–ø–Ω–∏–π –∫–æ–Ω–≤–µ—î—Ä –∂—É—Ä–Ω–∞–ª—é–≤–∞–Ω–Ω—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è, –≤–∏–º–∫–Ω–µ–Ω–∏–π –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ `ENABLE_REQUEST_LOGS=true`:

```
1_req_client.json ‚Üí 2_req_source.json ‚Üí 3_req_openai.json ‚Üí 4_req_target.json
‚Üí 5_res_provider.txt ‚Üí 6_res_openai.txt ‚Üí 7_res_client.txt
```

–§–∞–π–ª–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ `<repo>/logs/<session>/` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ–∞–Ω—Å—É –∑–∞–ø–∏—Ç—É.

## –†–µ–∂–∏–º–∏ –≤—ñ–¥–º–æ–≤ —ñ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å

## 1) –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É/–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞

- —á–∞—Å –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ —Ç–∏–º—á–∞—Å–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏/–ø–æ–º–∏–ª–∫–∏ —à–≤–∏–¥–∫–æ—Å—Ç—ñ/–∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –ø–µ—Ä–µ–¥ –Ω–µ–≤–¥–∞–ª–∏–º –∑–∞–ø–∏—Ç–æ–º
- —Ä–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å, –∫–æ–ª–∏ –ø–æ—Ç–æ—á–Ω–∏–π —à–ª—è—Ö –º–æ–¥–µ–ª—ñ/–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –≤–∏—á–µ—Ä–ø–∞–Ω–æ

## 2) –¢–µ—Ä–º—ñ–Ω –¥—ñ—ó –º–∞—Ä–∫–µ—Ä–∞

- –ø–æ–ø–µ—Ä–µ–¥–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ—é —Å–ø—Ä–æ–±–æ—é –¥–ª—è –æ–Ω–æ–≤–ª—é–≤–∞–Ω–∏—Ö –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤
- –ü–æ–≤—Ç–æ—Ä–Ω–∞ —Å–ø—Ä–æ–±–∞ 401/403 –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É —à–ª—è—Ö—É

## 3) –ë–µ–∑–ø–µ–∫–∞ –ø–æ—Ç–æ–∫—É

- –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –ø–æ—Ç–æ–∫—É –∑ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º
- –ø–æ—Ç—ñ–∫ –ø–µ—Ä–µ–∫–ª–∞–¥—É –∑—ñ –∑–º–∏–≤–æ–º —É –∫—ñ–Ω—Ü—ñ –ø–æ—Ç–æ–∫—É —Ç–∞ –æ–±—Ä–æ–±–∫–æ—é `[DONE]`
- —Ä–µ–∑–µ—Ä–≤–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, —è–∫—â–æ –º–µ—Ç–∞–¥–∞–Ω—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ

## 4) –î–µ–≥—Ä–∞–¥–∞—Ü—ñ—è —Ö–º–∞—Ä–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

- –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø–æ–º–∏–ª–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó, –∞–ª–µ –ª–æ–∫–∞–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è
- –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –º–∞—î –ª–æ–≥—ñ–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ—ó —Å–ø—Ä–æ–±–∏, –∞–ª–µ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–∞—Ä–∞–∑—ñ –≤–∏–∫–ª–∏–∫–∞—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é –∑ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ—é —Å–ø—Ä–æ–±–æ—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

## 5) –¶—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö

‚Äî –ú—ñ–≥—Ä–∞—Ü—ñ—è/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏ –ë–î –¥–ª—è –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –∫–ª—é—á—ñ–≤

- –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ –≥–∞—Ä–∞–Ω—Ç—ñ—ó —Å–∫–∏–¥–∞–Ω–Ω—è JSON –¥–ª—è localDb —ñ usageDb

## –°–ø–æ—Å—Ç–µ—Ä–µ–∂–ª–∏–≤—ñ—Å—Ç—å —ñ —Ä–æ–±–æ—á—ñ —Å–∏–≥–Ω–∞–ª–∏

–î–∂–µ—Ä–µ–ª–∞ –≤–∏–¥–∏–º–æ—Å—Ç—ñ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:

- –∂—É—Ä–Ω–∞–ª–∏ –∫–æ–Ω—Å–æ–ª—ñ –≤—ñ–¥ `src/sse/utils/logger.ts`
- —Å—É–∫—É–ø–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞ –∑–∞–ø–∏—Ç–æ–º —É `usage.json`
- —Ç–µ–∫—Å—Ç–æ–≤–∏–π –∂—É—Ä–Ω–∞–ª —Å—Ç–∞—Ç—É—Å—É –∑–∞–ø–∏—Ç—É `log.txt`
- –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –≥–ª–∏–±–æ–∫—ñ –∂—É—Ä–Ω–∞–ª–∏ –∑–∞–ø–∏—Ç—ñ–≤/–ø–µ—Ä–µ–∫–ª–∞–¥—ñ–≤ –ø—ñ–¥ `logs/`, –∫–æ–ª–∏ `ENABLE_REQUEST_LOGS=true`
- –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ (`/api/usage/*`) –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## –ß—É—Ç–ª–∏–≤—ñ –¥–æ –±–µ–∑–ø–µ–∫–∏ –º–µ–∂—ñ

- –°–µ–∫—Ä–µ—Ç JWT (`JWT_SECRET`) –∑–∞—Ö–∏—â–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É/–ø—ñ–¥–ø–∏—Å —Ñ–∞–π–ª—ñ–≤ cookie —Å–µ–∞–Ω—Å—É —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ
- –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –ø–∞—Ä–æ–ª—å (`INITIAL_PASSWORD`, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `123456`) –º–∞—î –±—É—Ç–∏ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —É —Ä–µ–∞–ª—å–Ω–∏—Ö —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è—Ö
- –ö–ª—é—á API HMAC Secret (`API_KEY_SECRET`) –∑–∞—Ö–∏—â–∞—î –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞ API
- –°–µ–∫—Ä–µ—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ (–∫–ª—é—á—ñ/—Ç–æ–∫–µ–Ω–∏ API) –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –ë–î —ñ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
- –ö—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ —Ö–º–∞—Ä–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø–æ–∫–ª–∞–¥–∞—é—Ç—å—Å—è –Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏–∫—É –∫–ª—é—á–∞ API + —Å–µ–º–∞–Ω—Ç–∏–∫—É —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ –º–∞—à–∏–Ω–∏

## –°–µ—Ä–µ–¥–æ–≤–∏—â–µ —Ç–∞ –º–∞—Ç—Ä–∏—Ü—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞, —è–∫—ñ –∞–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –∫–æ–¥–æ–º:

- –î–æ–¥–∞—Ç–æ–∫/–∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è: `JWT_SECRET`, `INITIAL_PASSWORD`
- –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è: `DATA_DIR`
- –°—É–º—ñ—Å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –≤—É–∑–ª–∞: `ALLOW_MULTI_CONNECTIONS_PER_COMPAT_NODE`
- –ü–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –±–∞–∑–∏ –ø–∞–º‚Äô—è—Ç—ñ (Linux/macOS, –∫–æ–ª–∏ `DATA_DIR` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ): `XDG_CONFIG_HOME`
- –•–µ—à—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏: `API_KEY_SECRET`, `MACHINE_ID_SALT`
- –ñ—É—Ä–Ω–∞–ª: `ENABLE_REQUEST_LOGS`
- URL-–∞–¥—Ä–µ—Å–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó/—Ö–º–∞—Ä–∏: `NEXT_PUBLIC_BASE_URL`, `NEXT_PUBLIC_CLOUD_URL`
- –í–∏—Ö—ñ–¥–Ω–∏–π –ø—Ä–æ–∫—Å—ñ: `HTTP_PROXY`, `HTTPS_PROXY`, `ALL_PROXY`, `NO_PROXY` —Ç–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤ –Ω–∏–∂–Ω—å–æ–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ
- –ü—Ä–∞–ø–æ—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ—ó SOCKS5: `ENABLE_SOCKS5_PROXY`, `NEXT_PUBLIC_ENABLE_SOCKS5_PROXY`
- –ü–æ–º—ñ—á–Ω–∏–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏/–≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–Ω–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏): `APPDATA`, `NODE_ENV`, `PORT`, `HOSTNAME`

## –í—ñ–¥–æ–º—ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏

1. `usageDb` —Ç–∞ `localDb` —Ç–µ–ø–µ—Ä —Å–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ç—É —Å–∞–º—É –±–∞–∑–æ–≤—É –ø–æ–ª—ñ—Ç–∏–∫—É –∫–∞—Ç–∞–ª–æ–≥—É (`DATA_DIR` -> `XDG_CONFIG_HOME/omniroute` -> `~/.omniroute`) —ñ–∑ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è–º —Ñ–∞–π–ª—ñ–≤ —É —Å—Ç–∞—Ä—ñ –≤–µ—Ä—Å—ñ—ó.
2. `/api/v1/route.ts` –ø–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π —ñ –Ω–µ —î –æ—Å–Ω–æ–≤–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º –º–æ–¥–µ–ª–µ–π, —è–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `/v1/models`.
3. –†–µ—î—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–ø–∏—Ç—ñ–≤ –∑–∞–ø–∏—Å—É—î –ø–æ–≤–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏/—Ç—ñ–ª–æ, —è–∫—â–æ –≤–≤—ñ–º–∫–Ω–µ–Ω–æ; –≤–≤–∞–∂–∞—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥ –∂—É—Ä–Ω–∞–ª—É –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–∏–º.
4. –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ —Ö–º–∞—Ä–∏ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ `NEXT_PUBLIC_BASE_URL` —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏ —Ö–º–∞—Ä–∏.
5. –ö–∞—Ç–∞–ª–æ–≥ `open-sse/` –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ —è–∫ `@omniroute/open-sse` **–ø–∞–∫–µ—Ç —Ä–æ–±–æ—á–æ—ó –æ–±–ª–∞—Å—Ç—ñ npm**. –í–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ —ñ–º–ø–æ—Ä—Ç—É—î –π–æ–≥–æ —á–µ—Ä–µ–∑ `@omniroute/open-sse/...` (–≤–∏—Ä—ñ—à–µ–Ω–æ Next.js `transpilePackages`). –®–ª—è—Ö–∏ –¥–æ —Ñ–∞–π–ª—ñ–≤ —É —Ü—å–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—ñ –≤—Å–µ —â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –Ω–∞–∑–≤—É –∫–∞—Ç–∞–ª–æ–≥—É `open-sse/` –¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ.
6. –î—ñ–∞–≥—Ä–∞–º–∏ –Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ–π –ø–∞–Ω–µ–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **Recharts** (–Ω–∞ –æ—Å–Ω–æ–≤—ñ SVG) –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—ó —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—ó –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ (–≥—ñ—Å—Ç–æ–≥—Ä–∞–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ, —Ç–∞–±–ª–∏—Ü—ñ —Ä–æ–∑–±–∏–≤–∫–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤ —ñ–∑ –ø–æ–∫–∞–∑–Ω–∏–∫–∞–º–∏ —É—Å–ø—ñ—Ö—É).
7. –¢–µ—Å—Ç–∏ E2E –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **Playwright** (`tests/e2e/`), –∑–∞–ø—É—Å–∫–∞—é—Ç—å —á–µ—Ä–µ–∑ `npm run test:e2e`. –£ –º–æ–¥—É–ª—å–Ω–∏—Ö —Ç–µ—Å—Ç–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **Node.js Test Runner** (`tests/unit/`), –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `npm run test:plan3`. –í–∏—Ö—ñ–¥–Ω–∏–º –∫–æ–¥–æ–º –ø—ñ–¥ `src/` —î **TypeScript** (`.ts`/`.tsx`); —Ä–æ–±–æ—á–∞ –æ–±–ª–∞—Å—Ç—å `open-sse/` –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è JavaScript (`.js`).
8. –°—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∞ –Ω–∞ 5 –≤–∫–ª–∞–¥–∫–∞—Ö: –ë–µ–∑–ø–µ–∫–∞, –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è (6 –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π: —Å–ø–æ—á–∞—Ç–∫—É –∑–∞–ø–æ–≤–Ω—é—î, —Ü–∏–∫–ª—ñ—á–Ω–∞, p2c, –≤–∏–ø–∞–¥–∫–æ–≤–∞, –Ω–∞–π–º–µ–Ω—à –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∞, –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –∑–∞ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏), –°—Ç—ñ–π–∫—ñ—Å—Ç—å (—Ä–µ–¥–∞–≥–æ–≤–∞–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–º–∏–∫–∞—á, –ø–æ–ª—ñ—Ç–∏–∫–∏), –®–Ü (–±—é–¥–∂–µ—Ç –º–∏—Å–ª–µ–Ω–Ω—è, —Å–∏—Å—Ç–µ–º–Ω–∞ –ø—ñ–¥–∫–∞–∑–∫–∞, –∫–µ—à –ø—ñ–¥–∫–∞–∑–æ–∫), –î–æ–¥–∞—Ç–∫–æ–≤–æ (–ø—Ä–æ–∫—Å—ñ).

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

- –ó–±—ñ—Ä–∫–∞ –∑ –¥–∂–µ—Ä–µ–ª–∞: `npm run build`
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±—Ä–∞–∑ Docker: `docker build -t omniroute .`
- –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–ª—É–∂–±—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
- `GET /api/settings`
- `GET /api/v1/models`
- –¶—ñ–ª—å–æ–≤–∞ –±–∞–∑–æ–≤–∞ URL-–∞–¥—Ä–µ—Å–∞ CLI –º–∞—î –±—É—Ç–∏ `http://<host>:20128/v1`, –∫–æ–ª–∏ `PORT=20128`
