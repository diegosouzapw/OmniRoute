# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ OmniRoute

üåê **Languages:** üá∫üá∏ [English](../../ARCHITECTURE.md) | üáßüá∑ [Portugu√™s (Brasil)](../pt-BR/ARCHITECTURE.md) | üá™üá∏ [Espa√±ol](../es/ARCHITECTURE.md) | üá´üá∑ [Fran√ßais](../fr/ARCHITECTURE.md) | üáÆüáπ [Italiano](../it/ARCHITECTURE.md) | üá∑üá∫ [–†—É—Å—Å–∫–∏–π](../ru/ARCHITECTURE.md) | üá®üá≥ [‰∏≠Êñá (ÁÆÄ‰Ωì)](../zh-CN/ARCHITECTURE.md) | üá©üá™ [Deutsch](../de/ARCHITECTURE.md) | üáÆüá≥ [‡§π‡§ø‡§®‡•ç‡§¶‡•Ä](../in/ARCHITECTURE.md) | üáπüá≠ [‡πÑ‡∏ó‡∏¢](../th/ARCHITECTURE.md) | üá∫üá¶ [–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞](../uk-UA/ARCHITECTURE.md) | üá∏üá¶ [ÿßŸÑÿπÿ±ÿ®Ÿäÿ©](../ar/ARCHITECTURE.md) | üáØüáµ [Êó•Êú¨Ë™û](../ja/ARCHITECTURE.md) | üáªüá≥ [Ti·∫øng Vi·ªát](../vi/ARCHITECTURE.md) | üáßüá¨ [–ë—ä–ª–≥–∞—Ä—Å–∫–∏](../bg/ARCHITECTURE.md) | üá©üá∞ [Dansk](../da/ARCHITECTURE.md) | üá´üáÆ [Suomi](../fi/ARCHITECTURE.md) | üáÆüá± [◊¢◊ë◊®◊ô◊™](../he/ARCHITECTURE.md) | üá≠üá∫ [Magyar](../hu/ARCHITECTURE.md) | üáÆüá© [Bahasa Indonesia](../id/ARCHITECTURE.md) | üá∞üá∑ [ÌïúÍµ≠Ïñ¥](../ko/ARCHITECTURE.md) | üá≤üáæ [Bahasa Melayu](../ms/ARCHITECTURE.md) | üá≥üá± [Nederlands](../nl/ARCHITECTURE.md) | üá≥üá¥ [Norsk](../no/ARCHITECTURE.md) | üáµüáπ [Portugu√™s (Portugal)](../pt/ARCHITECTURE.md) | üá∑üá¥ [Rom√¢nƒÉ](../ro/ARCHITECTURE.md) | üáµüá± [Polski](../pl/ARCHITECTURE.md) | üá∏üá∞ [Slovenƒçina](../sk/ARCHITECTURE.md) | üá∏üá™ [Svenska](../sv/ARCHITECTURE.md) | üáµüá≠ [Filipino](../phi/ARCHITECTURE.md)

_–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è: 2026-02-18_

## –†–µ–∑—é–º–µ

OmniRoute –µ –ª–æ–∫–∞–ª–µ–Ω AI –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞—â —à–ª—é–∑ –∏ —Ç–∞–±–ª–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –∏–∑–≥—Ä–∞–¥–µ–Ω–æ –Ω–∞ Next.js.
–¢–æ–π –æ—Å–∏–≥—É—Ä—è–≤–∞ –µ–¥–Ω–∞ –∫—Ä–∞–π–Ω–∞ —Ç–æ—á–∫–∞, —Å—ä–≤–º–µ—Å—Ç–∏–º–∞ —Å OpenAI (`/v1/*`) –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏ –Ω–∞–≥–æ—Ä–µ –ø–æ –≤–µ—Ä–∏–≥–∞—Ç–∞ —Å –ø—Ä–µ–≤–æ–¥, —Ä–µ–∑–µ—Ä–≤–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç, –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∏ –∏ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ.

–û—Å–Ω–æ–≤–Ω–∏ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- OpenAI-—Å—ä–≤–º–µ—Å—Ç–∏–º–∞ API –ø–æ–≤—ä—Ä—Ö–Ω–æ—Å—Ç –∑–∞ CLI/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ (28 –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏)
- –ü—Ä–µ–≤–æ–¥ –Ω–∞ –∑–∞—è–≤–∫–∞/–æ—Ç–≥–æ–≤–æ—Ä –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ç–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞
- –†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç –º–æ–¥–µ–ª–∏ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç –æ—Ç –Ω—è–∫–æ–ª–∫–æ –º–æ–¥–µ–ª–∞)
- –†–µ–∑–µ—Ä–≤–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞ –Ω–∏–≤–æ –∞–∫–∞—É–Ω—Ç (–º—É–ª—Ç–∏ –∞–∫–∞—É–Ω—Ç –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫)
- OAuth + API-–∫–ª—é—á —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞
- –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ —á—Ä–µ–∑ `/v1/embeddings` (6 –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞, 9 –º–æ–¥–µ–ª–∞)
- –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á—Ä–µ–∑ `/v1/images/generations` (4 –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞, 9 –º–æ–¥–µ–ª–∞)
- –ú–∏—Å–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Ç–∏—á–µ–Ω –∞–Ω–∞–ª–∏–∑ –Ω–∞ –µ—Ç–∏–∫–µ—Ç (`<think>...</think>`) –∑–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ —Ä–∞–∑—Å—ä–∂–¥–µ–Ω–∏–µ
- –î–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏—è –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∞ –∑–∞ —Å—Ç—Ä–∏–∫—Ç–Ω–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç —Å OpenAI SDK
- –ù–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–æ–ª—è—Ç–∞ (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫‚Üí—Å–∏—Å—Ç–µ–º–∞, —Å–∏—Å—Ç–µ–º–∞‚Üí–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª) –∑–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç –º–µ–∂–¥—É –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ –Ω–∞ –∏–∑—Ö–æ–¥ (json_schema ‚Üí Gemini responseSchema)
- –õ–æ–∫–∞–ª–Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç –∑–∞ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏, –∫–ª—é—á–æ–≤–µ, –ø—Å–µ–≤–¥–æ–Ω–∏–º–∏, –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ü–µ–Ω–æ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ
- –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ/—Ä–∞–∑—Ö–æ–¥–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞—è–≤–∫–∏
- –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –æ–±–ª–∞—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/—Å—ä—Å—Ç–æ—è–Ω–∏–µ
- –°–ø–∏—Å—ä–∫ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏/–±–ª–æ–∫–∏—Ä–∞–Ω–∏ IP –∞–¥—Ä–µ—Å–∏ –∑–∞ –∫–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –¥–æ—Å—Ç—ä–ø–∞ –¥–æ API
- –ú–∏—Å–ª–µ—â–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –±—é–¥–∂–µ—Ç–∞ (–ø—Ä–µ–º–∏–Ω–∞–≤–∞–Ω–µ/–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ/–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ/–∞–¥–∞–ø—Ç–∏–≤–Ω–æ)
- –ë—ä—Ä–∑–æ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –≥–ª–æ–±–∞–ª–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞
- –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ —Å–µ—Å–∏–∏ –∏ –ø—Ä—ä—Å—Ç–æ–≤–∏ –æ—Ç–ø–µ—á–∞—Ç—ä—Ü–∏
- –ü–æ–¥–æ–±—Ä–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞–Ω–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞ –∑–∞ –≤—Å–µ–∫–∏ –∞–∫–∞—É–Ω—Ç —Å—ä—Å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –ø—Ä–æ—Ñ–∏–ª–∏
- –ú–æ–¥–µ–ª –Ω–∞ –ø—Ä–µ–∫—ä—Å–≤–∞—á–∞ –∑–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞
- –ê–Ω—Ç–∏-–≥—Ä—ä–º–æ—Ç–µ–≤–∏—á–Ω–∞ —Å—Ç–∞–¥–Ω–∞ –∑–∞—â–∏—Ç–∞ —Å mutex –∑–∞–∫–ª—é—á–≤–∞–Ω–µ
- –ö–µ—à –∑–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –Ω–∞ –∑–∞—è–≤–∫–∏, –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ –ø–æ–¥–ø–∏—Å
- –°–ª–æ–π –Ω–∞ –¥–æ–º–µ–π–Ω–∞: –Ω–∞–ª–∏—á–Ω–æ—Å—Ç –Ω–∞ –º–æ–¥–µ–ª–∞, –ø—Ä–∞–≤–∏–ª–∞ –∑–∞ —Ä–∞–∑—Ö–æ–¥–∏—Ç–µ, —Ä–µ–∑–µ—Ä–≤–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞, –ø–æ–ª–∏—Ç–∏–∫–∞ –∑–∞ –±–ª–æ–∫–∏—Ä–∞–Ω–µ
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –¥–æ–º–µ–π–Ω–∞ (–∫–µ—à –∑–∞ –∑–∞–ø–∏—Å –Ω–∞ SQLite –∑–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∏, –±—é–¥–∂–µ—Ç–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –ø—Ä–µ–∫—ä—Å–≤–∞—á–∏ –Ω–∞ –≤–µ—Ä–∏–≥–∞)
- –ú–µ—Ö–∞–Ω–∏–∑—ä–º –∑–∞ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –æ—Ü–µ–Ω–∫–∞ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞ (–∑–∞–∫–ª—é—á–≤–∞–Ω–µ ‚Üí –±—é–¥–∂–µ—Ç ‚Üí —Ä–µ–∑–µ—Ä–≤–µ–Ω)
- –ó–∞—è–≤–∫–∞ –∑–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è —Å p50/p95/p99 –∞–≥—Ä–µ–≥–∏—Ä–∞–Ω–µ –Ω–∞ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç
- ID –Ω–∞ –∫–æ—Ä–µ–ª–∞—Ü–∏—è (X-Request-Id) –∑–∞ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –æ—Ç –∫—Ä–∞–π –¥–æ –∫—Ä–∞–π
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –æ–¥–∏—Ç –∑–∞ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –æ—Ç–∫–∞–∑ –∑–∞ –≤—Å–µ–∫–∏ API –∫–ª—é—á
- Eval framework –∑–∞ –æ—Å–∏–≥—É—Ä—è–≤–∞–Ω–µ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ LLM
- Resilience UI —Ç–∞–±–ª–æ —Å—ä—Å —Å—Ç–∞—Ç—É—Å –Ω–∞ –ø—Ä–µ–∫—ä—Å–≤–∞—á–∞ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ
- –ú–æ–¥—É–ª–Ω–∏ OAuth –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏ (12 –æ—Ç–¥–µ–ª–Ω–∏ –º–æ–¥—É–ª–∞ –ø–æ–¥ `src/lib/oauth/providers/`)

–û—Å–Ω–æ–≤–µ–Ω –º–æ–¥–µ–ª –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:

- –ú–∞—Ä—à—Ä—É—Ç–∏—Ç–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ Next.js –ø–æ–¥ `src/app/api/*` –ø—Ä–∏–ª–∞–≥–∞—Ç –∫–∞–∫—Ç–æ API –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Ç–∞–∫–∞ –∏ API –∑–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç
- –°–ø–æ–¥–µ–ª–µ–Ω–æ SSE/–º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞—â–æ —è–¥—Ä–æ –≤ `src/sse/*` + `open-sse/*` –æ–±—Ä–∞–±–æ—Ç–≤–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞, –ø—Ä–µ–≤–æ–¥–∞, —Å—Ç—Ä–∏–π–º–∏–Ω–≥, —Ä–µ–∑–µ—Ä–≤–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç –∏ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ

## –û–±—Ö–≤–∞—Ç –∏ –≥—Ä–∞–Ω–∏—Ü–∏

### –í –æ–±—Ö–≤–∞—Ç

- –í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª–µ–Ω —à–ª—é–∑
- API –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ
- –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –∏ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∞
- –ó–∞—è–≤–∫–∞ –∑–∞ –ø—Ä–µ–≤–æ–¥ –∏ SSE —Å—Ç—Ä–∏–π–º–∏–Ω–≥
- –õ–æ–∫–∞–ª–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ + –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ
- –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ –æ–±–ª–∞–∫–∞

### –ò–∑–≤—ä–Ω –æ–±—Ö–≤–∞—Ç–∞

- –í–Ω–µ–¥—Ä—è–≤–∞–Ω–µ –Ω–∞ –æ–±–ª–∞—á–Ω–∞ —É—Å–ª—É–≥–∞ –∑–∞–¥ `NEXT_PUBLIC_CLOUD_URL`
- SLA/–∫–æ–Ω—Ç—Ä–æ–ª–Ω–∞ —Ä–∞–≤–Ω–∏–Ω–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –∏–∑–≤—ä–Ω –ª–æ–∫–∞–ª–Ω–∏—è –ø—Ä–æ—Ü–µ—Å
- –°–∞–º–∏—Ç–µ –≤—ä–Ω—à–Ω–∏ CLI –¥–≤–æ–∏—á–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ (Claude CLI, Codex CLI –∏ —Ç.–Ω.)

## –°–∏—Å—Ç–µ–º–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ –≤–∏—Å–æ–∫–æ –Ω–∏–≤–æ

```mermaid
flowchart LR
    subgraph Clients[Developer Clients]
        C1[Claude Code]
        C2[Codex CLI]
        C3[OpenClaw / Droid / Cline / Continue / Roo]
        C4[Custom OpenAI-compatible clients]
        BROWSER[Browser Dashboard]
    end

    subgraph Router[OmniRoute Local Process]
        API[V1 Compatibility API\n/v1/*]
        DASH[Dashboard + Management API\n/api/*]
        CORE[SSE + Translation Core\nopen-sse + src/sse]
        DB[(db.json)]
        UDB[(usage.json + log.txt)]
    end

    subgraph Upstreams[Upstream Providers]
        P1[OAuth Providers\nClaude/Codex/Gemini/Qwen/iFlow/GitHub/Kiro/Cursor/Antigravity]
        P2[API Key Providers\nOpenAI/Anthropic/OpenRouter/GLM/Kimi/MiniMax\nDeepSeek/Groq/xAI/Mistral/Perplexity\nTogether/Fireworks/Cerebras/Cohere/NVIDIA]
        P3[Compatible Nodes\nOpenAI-compatible / Anthropic-compatible]
    end

    subgraph Cloud[Optional Cloud Sync]
        CLOUD[Cloud Sync Endpoint\nNEXT_PUBLIC_CLOUD_URL]
    end

    C1 --> API
    C2 --> API
    C3 --> API
    C4 --> API
    BROWSER --> DASH

    API --> CORE
    DASH --> DB
    CORE --> DB
    CORE --> UDB

    CORE --> P1
    CORE --> P2
    CORE --> P3

    DASH --> CLOUD
```

## –û—Å–Ω–æ–≤–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ

## 1) API –∏ —Å–ª–æ–π –∑–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞–Ω–µ (–ú–∞—Ä—à—Ä—É—Ç–∏ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ Next.js)

–û—Å–Ω–æ–≤–Ω–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

- `src/app/api/v1/*` –∏ `src/app/api/v1beta/*` –∑–∞ API –∑–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç
- `src/app/api/*` –∑–∞ API –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ
- –°–ª–µ–¥–≤–∞—â–æ—Ç–æ –ø—Ä–µ–Ω–∞–ø–∏—Å–≤–∞–Ω–µ –≤ `next.config.mjs` –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ `/v1/*` –≤ `/api/v1/*`

–í–∞–∂–Ω–∏ –ø—ä—Ç–∏—â–∞ –∑–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç:

- `src/app/api/v1/chat/completions/route.ts`
- `src/app/api/v1/messages/route.ts`
- `src/app/api/v1/responses/route.ts`
- `src/app/api/v1/models/route.ts` ‚Äî –≤–∫–ª—é—á–≤–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –º–æ–¥–µ–ª–∏ —Å `custom: true`
- `src/app/api/v1/embeddings/route.ts` ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ (6 –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞)
- `src/app/api/v1/images/generations/route.ts` ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (4+ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏, –≤–∫–ª. Antigravity/Nebius)
- `src/app/api/v1/messages/count_tokens/route.ts`
- `src/app/api/v1/providers/[provider]/chat/completions/route.ts` ‚Äî —Å–ø–µ—Ü–∏–∞–ª–µ–Ω —á–∞—Ç –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫
- `src/app/api/v1/providers/[provider]/embeddings/route.ts` ‚Äî —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –≤–≥—Ä–∞–∂–¥–∞–Ω–∏—è –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫
- `src/app/api/v1/providers/[provider]/images/generations/route.ts` ‚Äî —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫
- `src/app/api/v1beta/models/route.ts`
- `src/app/api/v1beta/models/[...path]/route.ts`

–î–æ–º–µ–π–Ω–∏ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

- –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ/–Ω–∞—Å—Ç—Ä–æ–π–∫–∏: `src/app/api/auth/*`, `src/app/api/settings/*`
- –î–æ—Å—Ç–∞–≤—á–∏—Ü–∏/–≤—Ä—ä–∑–∫–∏: `src/app/api/providers*`
- –í—ä–∑–ª–∏ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫: `src/app/api/provider-nodes*`
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –º–æ–¥–µ–ª–∏: `src/app/api/provider-models` (GET/POST/DELETE)
- –ö–∞—Ç–∞–ª–æ–≥ —Å –º–æ–¥–µ–ª–∏: `src/app/api/models/catalog` (GET)
- –ü—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `src/app/api/settings/proxy` (GET/PUT/DELETE) + `src/app/api/settings/proxy/test` (POST)
- OAuth: `src/app/api/oauth/*`
- –ö–ª—é—á–æ–≤–µ/–ø—Å–µ–≤–¥–æ–Ω–∏–º–∏/–∫–æ–º–±–æ—Ç–∞/—Ü–µ–Ω–∏: `src/app/api/keys*`, `src/app/api/models/alias`, `src/app/api/combos*`, `src/app/api/pricing`
- –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ: `src/app/api/usage/*`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ/–æ–±–ª–∞–∫: `src/app/api/sync/*`, `src/app/api/cloud/*`
- –ü–æ–º–æ—â–Ω–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∑–∞ CLI: `src/app/api/cli-tools/*`
- IP —Ñ–∏–ª—Ç—ä—Ä: `src/app/api/settings/ip-filter` (GET/PUT)
- –ë—é–¥–∂–µ—Ç –∑–∞ –º–∏—Å–ª–µ–Ω–µ: `src/app/api/settings/thinking-budget` (GET/PUT)
- –°–∏—Å—Ç–µ–º–Ω–∞ –ø–æ–¥–∫–∞–Ω–∞: `src/app/api/settings/system-prompt` (GET/PUT)
- –°–µ—Å–∏–∏: `src/app/api/sessions` (GET)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞: `src/app/api/rate-limits` (GET)
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç: `src/app/api/resilience` (GET/PATCH) ‚Äî –ø—Ä–æ—Ñ–∏–ª–∏ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫, –ø—Ä–µ–∫—ä—Å–≤–∞—á, —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞
- –ù—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—Ç–∞: `src/app/api/resilience/reset` (POST) ‚Äî –Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–µ–∫—ä—Å–≤–∞—á–∏ + –æ—Ö–ª–∞–∂–¥–∞–Ω–µ
- –ö–µ—à —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: `src/app/api/cache/stats` (–ü–û–õ–£–ß–ê–í–ê–ù–ï/–ò–ó–¢–†–ò–í–ê–ù–ï)
- –ù–∞–ª–∏—á–Ω–æ—Å—Ç –Ω–∞ –º–æ–¥–µ–ª–∞: `src/app/api/models/availability` (GET/POST)
- –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è: `src/app/api/telemetry/summary` (GET)
- –ë—é–¥–∂–µ—Ç: `src/app/api/usage/budget` (GET/POST)
- –†–µ–∑–µ—Ä–≤–Ω–∏ –≤–µ—Ä–∏–≥–∏: `src/app/api/fallback/chains` (GET/POST/DELETE)
- –û–¥–∏—Ç –∑–∞ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: `src/app/api/compliance/audit-log` (GET)
- –°—Ç–æ–π–Ω–æ—Å—Ç–∏: `src/app/api/evals` (GET/POST), `src/app/api/evals/[suiteId]` (GET)
- –ü—Ä–∞–≤–∏–ª–∞: `src/app/api/policies` (GET/POST)

## 2) SSE + —è–¥—Ä–æ –∑–∞ –ø—Ä–µ–≤–æ–¥

–û—Å–Ω–æ–≤–Ω–∏ –º–æ–¥—É–ª–∏ –Ω–∞ –ø–æ—Ç–æ–∫–∞:

- –ó–∞–ø–∏—Å: `src/sse/handlers/chat.ts`
- –û—Å–Ω–æ–≤–Ω–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: `open-sse/handlers/chatCore.ts`
- –ê–¥–∞–ø—Ç–µ—Ä–∏ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞: `open-sse/executors/*`
- –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞: `open-sse/services/provider.ts`
- –†–∞–∑–±–æ—Ä/—Ä–∞–∑—Ä–µ—à–∞–≤–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∞: `src/sse/services/model.ts`, `open-sse/services/model.ts`
- –†–µ–∑–µ—Ä–≤–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞ –∞–∫–∞—É–Ω—Ç–∞: `open-sse/services/accountFallback.ts`
- –†–µ–≥–∏—Å—Ç—ä—Ä –Ω–∞ –ø—Ä–µ–≤–æ–¥–∏—Ç–µ: `open-sse/translator/index.ts`
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ –ø–æ—Ç–æ–∫–∞: `open-sse/utils/stream.ts`, `open-sse/utils/streamHandler.ts`
- –ò–∑–≤–ª–∏—á–∞–Ω–µ/–Ω–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ: `open-sse/utils/usageTracking.ts`
- –ú–∏—Å–ª–µ–Ω –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞ –µ—Ç–∏–∫–µ—Ç–∏: `open-sse/utils/thinkTagParser.ts`
- –ú–∞–Ω–∏–ø—É–ª–∞—Ç–æ—Ä –∑–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ: `open-sse/handlers/embeddings.ts`
- –†–µ–≥–∏—Å—Ç—ä—Ä –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –Ω–∞ –≤–≥—Ä–∞–∂–¥–∞–Ω–µ: `open-sse/config/embeddingRegistry.ts`
- –ú–∞–Ω–∏–ø—É–ª–∞—Ç–æ—Ä –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `open-sse/handlers/imageGeneration.ts`
- –†–µ–≥–∏—Å—Ç—ä—Ä –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `open-sse/config/imageRegistry.ts`
- –°–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∞: `open-sse/handlers/responseSanitizer.ts`
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–æ–ª—è—Ç–∞: `open-sse/services/roleNormalizer.ts`

–£—Å–ª—É–≥–∏ (–±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞):

- –ò–∑–±–æ—Ä/—Ç–æ—á–∫—É–≤–∞–Ω–µ –Ω–∞ –∞–∫–∞—É–Ω—Ç: `open-sse/services/accountSelector.ts`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∂–∏–∑–Ω–µ–Ω–∏—è —Ü–∏–∫—ä–ª –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: `open-sse/services/contextManager.ts`
- –ù–∞–ª–∞–≥–∞–Ω–µ –Ω–∞ IP —Ñ–∏–ª—Ç—ä—Ä: `open-sse/services/ipFilter.ts`
- –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ —Å–µ—Å–∏–∏: `open-sse/services/sessionManager.ts`
- –ò—Å–∫–∞–Ω–µ –∑–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è: `open-sse/services/signatureCache.ts`
- –°–∏—Å—Ç–µ–º–Ω–æ –±—ä—Ä–∑–æ –∏–Ω–∂–µ–∫—Ç–∏—Ä–∞–Ω–µ: `open-sse/services/systemPrompt.ts`
- –ú–∏—Å–ª–µ—â–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –±—é–¥–∂–µ—Ç–∞: `open-sse/services/thinkingBudget.ts`
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∞ —Å—ä—Å –∑–∞–º–µ—Å—Ç–≤–∞—â–∏ –∑–Ω–∞—Ü–∏: `open-sse/services/wildcardRouter.ts`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ª–∏–º–∏—Ç–∞ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞: `open-sse/services/rateLimitManager.ts`
- –ü—Ä–µ–∫—ä—Å–≤–∞—á: `open-sse/services/circuitBreaker.ts`

–ú–æ–¥—É–ª–∏ –Ω–∞ –Ω–∏–≤–æ –¥–æ–º–µ–π–Ω:

- –ù–∞–ª–∏—á–Ω–æ—Å—Ç –Ω–∞ –º–æ–¥–µ–ª–∞: `src/lib/domain/modelAvailability.ts`
- –ü—Ä–∞–≤–∏–ª–∞/–±—é–¥–∂–µ—Ç–∏ –∑–∞ —Ä–∞–∑—Ö–æ–¥–∏—Ç–µ: `src/lib/domain/costRules.ts`
- –†–µ–∑–µ—Ä–≤–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞: `src/lib/domain/fallbackPolicy.ts`
- –ö–æ–º–±–æ —Ä–µ–∑–æ–ª–≤–µ—Ä: `src/lib/domain/comboResolver.ts`
- –ü—Ä–∞–≤–∏–ª–∞ –∑–∞ –±–ª–æ–∫–∏—Ä–∞–Ω–µ: `src/lib/domain/lockoutPolicy.ts`
- –ú–µ—Ö–∞–Ω–∏–∑—ä–º –∑–∞ –ø—Ä–∞–≤–∏–ª–∞: `src/domain/policyEngine.ts` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω–æ –±–ª–æ–∫–∏—Ä–∞–Ω–µ ‚Üí –±—é–¥–∂–µ—Ç ‚Üí —Ä–µ–∑–µ—Ä–≤–Ω–∞ –æ—Ü–µ–Ω–∫–∞
- –ö–∞—Ç–∞–ª–æ–≥ —Å –∫–æ–¥–æ–≤–µ –∑–∞ –≥—Ä–µ—à–∫–∏: `src/lib/domain/errorCodes.ts`
- ID –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞: `src/lib/domain/requestId.ts`
- –í—Ä–µ–º–µ –∑–∞ –∏–∑—á–∞–∫–≤–∞–Ω–µ –Ω–∞ –∏–∑–≤–ª–∏—á–∞–Ω–µ: `src/lib/domain/fetchTimeout.ts`
- –ó–∞—è–≤–∫–∞ –∑–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è: `src/lib/domain/requestTelemetry.ts`
- –°—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ/–æ–¥–∏—Ç: `src/lib/domain/compliance/index.ts`
- –ï–≤–∞–ª –±–µ–≥–∞—á: `src/lib/domain/evalRunner.ts`
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –¥–æ–º–µ–π–Ω–∞: `src/lib/db/domainState.ts` ‚Äî SQLite CRUD –∑–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∏ –≤–µ—Ä–∏–≥–∏, –±—é–¥–∂–µ—Ç–∏, –∏—Å—Ç–æ—Ä–∏—è –Ω–∞ —Ä–∞–∑—Ö–æ–¥–∏—Ç–µ, —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –±–ª–æ–∫–∏—Ä–∞–Ω–µ, –ø—Ä–µ–∫—ä—Å–≤–∞—á–∏

–ú–æ–¥—É–ª–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫ –Ω–∞ OAuth (12 –æ—Ç–¥–µ–ª–Ω–∏ —Ñ–∞–π–ª–∞ –ø–æ–¥ `src/lib/oauth/providers/`):

- –ò–Ω–¥–µ–∫—Å –Ω–∞ —Ä–µ–≥–∏—Å—Ç—ä—Ä–∞: `src/lib/oauth/providers/index.ts`
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª–Ω–∏ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏: `claude.ts`, `codex.ts`, `gemini.ts`, `antigravity.ts`, `iflow.ts`, `qwen.ts`, `kimi-coding.ts`, `github.ts`, `kiro.ts`, `cursor.ts`, `kilocode.ts`, `cline.ts`
- –¢—ä–Ω–∫–∞ –æ–±–≤–∏–≤–∫–∞: `src/lib/oauth/providers.ts` ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ –æ—Ç –æ—Ç–¥–µ–ª–Ω–∏ –º–æ–¥—É–ª–∏

## 3) –°–ª–æ–π –∑–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç

–û—Å–Ω–æ–≤–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ DB:

- `src/lib/localDb.ts`
- —Ñ–∞–π–ª: `${DATA_DIR}/db.json` (–∏–ª–∏ `$XDG_CONFIG_HOME/omniroute/db.json`, –∫–æ–≥–∞—Ç–æ –µ –∑–∞–¥–∞–¥–µ–Ω–æ, –≤ –ø—Ä–æ—Ç–∏–≤–µ–Ω —Å–ª—É—á–∞–π `~/.omniroute/db.json`)
- –æ–±–µ–∫—Ç–∏: providerConnections, providerNodes, modelAliases, –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, apiKeys, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ü–µ–Ω–æ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ, **customModels**, **proxyConfig**, **ipFilter**, **thinkingBudget**, **systemPrompt**

DB –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ:

- `src/lib/usageDb.ts`
- —Ñ–∞–π–ª–æ–≤–µ: `${DATA_DIR}/usage.json`, `${DATA_DIR}/log.txt`, `${DATA_DIR}/call_logs/`
- —Å–ª–µ–¥–≤–∞ —Å—ä—â–∞—Ç–∞ –æ—Å–Ω–æ–≤–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –∑–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫–∞—Ç–æ `localDb` (`DATA_DIR`, —Å–ª–µ–¥ —Ç–æ–≤–∞ `XDG_CONFIG_HOME/omniroute`, –∫–æ–≥–∞—Ç–æ –µ –∑–∞–¥–∞–¥–µ–Ω–æ)
- —Ä–∞–∑–ª–æ–∂–µ–Ω –Ω–∞ —Ñ–æ–∫—É—Å–∏—Ä–∞–Ω–∏ –ø–æ–¥–º–æ–¥—É–ª–∏: `migrations.ts`, `usageHistory.ts`, `costCalculator.ts`, `usageStats.ts`, `callLogs.ts`

DB –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –¥–æ–º–µ–π–Ω–∞ (SQLite):

- `src/lib/db/domainState.ts` ‚Äî CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –¥–æ–º–µ–π–Ω–∞
- –¢–∞–±–ª–∏—Ü–∏ (—Å—ä–∑–¥–∞–¥–µ–Ω–∏ –≤ `src/lib/db/core.ts`): `domain_fallback_chains`, `domain_budgets`, `domain_cost_history`, `domain_lockout_state`, `domain_circuit_breakers`
- –ú–æ–¥–µ–ª –Ω–∞ –∫–µ—à–∞ –∑–∞ –∑–∞–ø–∏—Å: –ö–∞—Ä—Ç–∏—Ç–µ –≤ –ø–∞–º–µ—Ç—Ç–∞ —Å–∞ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ; –º—É—Ç–∞—Ü–∏–∏—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ SQLite; —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ —Å–µ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤—è–≤–∞ –æ—Ç DB –ø—Ä–∏ —Å—Ç—É–¥–µ–Ω —Å—Ç–∞—Ä—Ç

## 4) –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ + –ø–æ–≤—ä—Ä—Ö–Ω–æ—Å—Ç–∏ –∑–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç

- –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ –Ω–∞ –±–∏—Å–∫–≤–∏—Ç–∫–∏—Ç–µ –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `src/proxy.ts`, `src/app/api/auth/login/route.ts`
- –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ/–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ API –∫–ª—é—á: `src/shared/utils/apiKey.ts`
- –¢–∞–π–Ω–∏—Ç–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –≤ `providerConnections` –∑–∞–ø–∏—Å–∏
- –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ –∏–∑—Ö–æ–¥—è—â –ø—Ä–æ–∫—Å–∏ —á—Ä–µ–∑ `open-sse/utils/proxyFetch.ts` (env vars) –∏ `open-sse/utils/networkProxy.ts` (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫ –∏–ª–∏ –≥–ª–æ–±–∞–ª–Ω–æ)

## 5) –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ –≤ –æ–±–ª–∞–∫

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—á–∏–∫–∞: `src/lib/initCloudSync.ts`, `src/shared/services/initializeCloudSync.ts`
- –ü–µ—Ä–∏–æ–¥–∏—á–Ω–∞ –∑–∞–¥–∞—á–∞: `src/shared/services/cloudSyncScheduler.ts`
- –ö–æ–Ω—Ç—Ä–æ–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç: `src/app/api/sync/cloud/route.ts`

## –ñ–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ –∑–∞—è–≤–∫–∞ (`/v1/chat/completions`)

```mermaid
sequenceDiagram
    autonumber
    participant Client as CLI/SDK Client
    participant Route as /api/v1/chat/completions
    participant Chat as src/sse/handlers/chat
    participant Core as open-sse/handlers/chatCore
    participant Model as Model Resolver
    participant Auth as Credential Selector
    participant Exec as Provider Executor
    participant Prov as Upstream Provider
    participant Stream as Stream Translator
    participant Usage as usageDb

    Client->>Route: POST /v1/chat/completions
    Route->>Chat: handleChat(request)
    Chat->>Model: parse/resolve model or combo

    alt Combo model
        Chat->>Chat: iterate combo models (handleComboChat)
    end

    Chat->>Auth: getProviderCredentials(provider)
    Auth-->>Chat: active account + tokens/api key

    Chat->>Core: handleChatCore(body, modelInfo, credentials)
    Core->>Core: detect source format
    Core->>Core: translate request to target format
    Core->>Exec: execute(provider, transformedBody)
    Exec->>Prov: upstream API call
    Prov-->>Exec: SSE/JSON response
    Exec-->>Core: response + metadata

    alt 401/403
        Core->>Exec: refreshCredentials()
        Exec-->>Core: updated tokens
        Core->>Exec: retry request
    end

    Core->>Stream: translate/normalize stream to client format
    Stream-->>Client: SSE chunks / JSON response

    Stream->>Usage: extract usage + persist history/log
```

## –ö–æ–º–±–æ + –†–µ–∑–µ—Ä–≤–µ–Ω –ø–æ—Ç–æ–∫ –Ω–∞ –∞–∫–∞—É–Ω—Ç

```mermaid
flowchart TD
    A[Incoming model string] --> B{Is combo name?}
    B -- Yes --> C[Load combo models sequence]
    B -- No --> D[Single model path]

    C --> E[Try model N]
    E --> F[Resolve provider/model]
    D --> F

    F --> G[Select account credentials]
    G --> H{Credentials available?}
    H -- No --> I[Return provider unavailable]
    H -- Yes --> J[Execute request]

    J --> K{Success?}
    K -- Yes --> L[Return response]
    K -- No --> M{Fallback-eligible error?}

    M -- No --> N[Return error]
    M -- Yes --> O[Mark account unavailable cooldown]
    O --> P{Another account for provider?}
    P -- Yes --> G
    P -- No --> Q{In combo with next model?}
    Q -- Yes --> E
    Q -- No --> R[Return all unavailable]
```

–†–µ–∑–µ—Ä–≤–Ω–∏—Ç–µ —Ä–µ—à–µ–Ω–∏—è —Å–µ —É–ø—Ä–∞–≤–ª—è–≤–∞—Ç –æ—Ç `open-sse/services/accountFallback.ts` —Å –ø–æ–º–æ—â—Ç–∞ –Ω–∞ –∫–æ–¥–æ–≤–µ –∑–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ –µ–≤—Ä–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å—ä–æ–±—â–µ–Ω–∏—è –∑–∞ –≥—Ä–µ—à–∫–∞.

## –ñ–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ –≤–Ω–µ–¥—Ä—è–≤–∞–Ω–µ –Ω–∞ OAuth –∏ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∏

```mermaid
sequenceDiagram
    autonumber
    participant UI as Dashboard UI
    participant OAuth as /api/oauth/[provider]/[action]
    participant ProvAuth as Provider Auth Server
    participant DB as localDb
    participant Test as /api/providers/[id]/test
    participant Exec as Provider Executor

    UI->>OAuth: GET authorize or device-code
    OAuth->>ProvAuth: create auth/device flow
    ProvAuth-->>OAuth: auth URL or device code payload
    OAuth-->>UI: flow data

    UI->>OAuth: POST exchange or poll
    OAuth->>ProvAuth: token exchange/poll
    ProvAuth-->>OAuth: access/refresh tokens
    OAuth->>DB: createProviderConnection(oauth data)
    OAuth-->>UI: success + connection id

    UI->>Test: POST /api/providers/[id]/test
    Test->>Exec: validate credentials / optional refresh
    Exec-->>Test: valid or refreshed token info
    Test->>DB: update status/tokens/errors
    Test-->>UI: validation result
```

–û–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ—Ç–æ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –∂–∏–≤–æ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –≤—ä—Ç—Ä–µ –≤ `open-sse/handlers/chatCore.ts` —á—Ä–µ–∑ –∏–∑–ø—ä–ª–Ω–∏—Ç–µ–ª `refreshCredentials()`.

## –ñ–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ Cloud Sync (–ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ / –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ / –î–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ)

```mermaid
sequenceDiagram
    autonumber
    participant UI as Endpoint Page UI
    participant Sync as /api/sync/cloud
    participant DB as localDb
    participant Cloud as External Cloud Sync
    participant Claude as ~/.claude/settings.json

    UI->>Sync: POST action=enable
    Sync->>DB: set cloudEnabled=true
    Sync->>DB: ensure API key exists
    Sync->>Cloud: POST /sync/{machineId} (providers/aliases/combos/keys)
    Cloud-->>Sync: sync result
    Sync->>Cloud: GET /{machineId}/v1/verify
    Sync-->>UI: enabled + verification status

    UI->>Sync: POST action=sync
    Sync->>Cloud: POST /sync/{machineId}
    Cloud-->>Sync: remote data
    Sync->>DB: update newer local tokens/status
    Sync-->>UI: synced

    UI->>Sync: POST action=disable
    Sync->>DB: set cloudEnabled=false
    Sync->>Cloud: DELETE /sync/{machineId}
    Sync->>Claude: switch ANTHROPIC_BASE_URL back to local (if needed)
    Sync-->>UI: disabled
```

–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ —Å–µ –∑–∞–¥–µ–π—Å—Ç–≤–∞ –æ—Ç `CloudSyncScheduler`, –∫–æ–≥–∞—Ç–æ –æ–±–ª–∞–∫—ä—Ç –µ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω.

## –ú–æ–¥–µ–ª –Ω–∞ –¥–∞–Ω–Ω–∏ –∏ –∫–∞—Ä—Ç–∞ –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```mermaid
erDiagram
    SETTINGS ||--o{ PROVIDER_CONNECTION : controls
    PROVIDER_NODE ||--o{ PROVIDER_CONNECTION : backs_compatible_provider
    PROVIDER_CONNECTION ||--o{ USAGE_ENTRY : emits_usage

    SETTINGS {
      boolean cloudEnabled
      number stickyRoundRobinLimit
      boolean requireLogin
      string password_hash
      string fallbackStrategy
      json rateLimitDefaults
      json providerProfiles
    }

    PROVIDER_CONNECTION {
      string id
      string provider
      string authType
      string name
      number priority
      boolean isActive
      string apiKey
      string accessToken
      string refreshToken
      string expiresAt
      string testStatus
      string lastError
      string rateLimitedUntil
      json providerSpecificData
    }

    PROVIDER_NODE {
      string id
      string type
      string name
      string prefix
      string apiType
      string baseUrl
    }

    MODEL_ALIAS {
      string alias
      string targetModel
    }

    COMBO {
      string id
      string name
      string[] models
    }

    API_KEY {
      string id
      string name
      string key
      string machineId
    }

    USAGE_ENTRY {
      string provider
      string model
      number prompt_tokens
      number completion_tokens
      string connectionId
      string timestamp
    }

    CUSTOM_MODEL {
      string id
      string name
      string providerId
    }

    PROXY_CONFIG {
      string global
      json providers
    }

    IP_FILTER {
      string mode
      string[] allowlist
      string[] blocklist
    }

    THINKING_BUDGET {
      string mode
      number customBudget
      string effortLevel
    }

    SYSTEM_PROMPT {
      boolean enabled
      string prompt
      string position
    }
```

–§–∞–π–ª–æ–≤–µ –∑–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ:

- –æ—Å–Ω–æ–≤–Ω–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ: `${DATA_DIR}/db.json` (–∏–ª–∏ `$XDG_CONFIG_HOME/omniroute/db.json`, –∫–æ–≥–∞—Ç–æ –µ –∑–∞–¥–∞–¥–µ–Ω–æ, –≤ –ø—Ä–æ—Ç–∏–≤–µ–Ω —Å–ª—É—á–∞–π `~/.omniroute/db.json`)
- —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ: `${DATA_DIR}/usage.json`
- –†–µ–¥–æ–≤–µ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞: `${DATA_DIR}/log.txt`
- –Ω–µ–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ —Å–µ—Å–∏–∏ –∑–∞ –ø—Ä–µ–≤–æ–¥–∞—á/–∑–∞—è–≤–∫–∞ –∑–∞ –æ—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏: `<repo>/logs/...`

## –¢–æ–ø–æ–ª–æ–≥–∏—è –Ω–∞ —Ä–∞–∑–ø–æ–ª–∞–≥–∞–Ω–µ

```mermaid
flowchart LR
    subgraph LocalHost[Developer Host]
        CLI[CLI Tools]
        Browser[Dashboard Browser]
    end

    subgraph ContainerOrProcess[OmniRoute Runtime]
        Next[Next.js Server\nPORT=20128]
        Core[SSE Core + Executors]
        MainDB[(db.json)]
        UsageDB[(usage.json/log.txt)]
    end

    subgraph External[External Services]
        Providers[AI Providers]
        SyncCloud[Cloud Sync Service]
    end

    CLI --> Next
    Browser --> Next
    Next --> Core
    Next --> MainDB
    Core --> MainDB
    Core --> UsageDB
    Core --> Providers
    Next --> SyncCloud
```

## –°—ä–ø–æ—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –º–æ–¥—É–ª (–∫—Ä–∏—Ç–∏—á–Ω–æ –∑–∞ –≤–∑–µ–º–∞–Ω–µ –Ω–∞ —Ä–µ—à–µ–Ω–∏—è)

### –ú–æ–¥—É–ª–∏ –∑–∞ –º–∞—Ä—à—Ä—É—Ç –∏ API

- `src/app/api/v1/*`, `src/app/api/v1beta/*`: API –∑–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç
- `src/app/api/v1/providers/[provider]/*`: —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∏ –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫ (—á–∞—Ç, –≤–≥—Ä–∞–∂–¥–∞–Ω–∏—è, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- `src/app/api/providers*`: –¥–æ—Å—Ç–∞–≤—á–∏–∫ CRUD, –≤–∞–ª–∏–¥–∏—Ä–∞–Ω–µ, —Ç–µ—Å—Ç–≤–∞–Ω–µ
- `src/app/api/provider-nodes*`: –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤—ä–∑–ª–∏
- `src/app/api/provider-models`: –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥–µ–ª–∞ (CRUD)
- `src/app/api/models/catalog`: –ø—ä–ª–µ–Ω –º–æ–¥–µ–ª –∫–∞—Ç–∞–ª–æ–≥ API (–≤—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ –≥—Ä—É–ø–∏—Ä–∞–Ω–∏ –ø–æ –¥–æ—Å—Ç–∞–≤—á–∏–∫)
- `src/app/api/oauth/*`: OAuth/–∫–æ–¥ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–æ—Ç–∏—á–∞
- `src/app/api/keys*`: –∂–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ –ª–æ–∫–∞–ª–µ–Ω API –∫–ª—é—á
- `src/app/api/models/alias`: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Å–µ–≤–¥–æ–Ω–∏–º–∏
- `src/app/api/combos*`: —Ä–µ–∑–µ—Ä–≤–Ω–æ –∫–æ–º–±–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- `src/app/api/pricing`: —Ü–µ–Ω–æ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ –æ—Ç–º–µ–Ω—è –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑—Ö–æ–¥–∏—Ç–µ
- `src/app/api/settings/proxy`: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ–∫—Å–∏ (GET/PUT/DELETE)
- `src/app/api/settings/proxy/test`: —Ç–µ—Å—Ç –∑–∞ –∏–∑—Ö–æ–¥—è—â–∞ –ø—Ä–æ–∫—Å–∏ –≤—Ä—ä–∑–∫–∞ (POST)
- `src/app/api/usage/*`: API –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ
- `src/app/api/sync/*` + `src/app/api/cloud/*`: –æ–±–ª–∞—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ –∏ –ø–æ–º–æ—â–Ω–∏—Ü–∏ –≤ –æ–±–ª–∞–∫–∞
- `src/app/api/cli-tools/*`: –ª–æ–∫–∞–ª–Ω–∏ –ø–∏—Å–∞—Ç–µ–ª–∏/–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –Ω–∞ CLI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `src/app/api/settings/ip-filter`: —Å–ø–∏—Å—ä–∫ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏/–±–ª–æ–∫–∏—Ä–∞–Ω–∏ IP –∞–¥—Ä–µ—Å–∏ (GET/PUT)
- `src/app/api/settings/thinking-budget`: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –±—é–¥–∂–µ—Ç–∞ –Ω–∞ –º–∏—Å–ª–µ—â —Ç–æ–∫–µ–Ω (GET/PUT)
- `src/app/api/settings/system-prompt`: –≥–ª–æ–±–∞–ª–Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∞ –ø–æ–¥–∫–∞–Ω–∞ (GET/PUT)
- `src/app/api/sessions`: —Å–ø–∏—Å—ä–∫ —Å –∞–∫—Ç–∏–≤–Ω–∏ —Å–µ—Å–∏–∏ (GET)
- `src/app/api/rate-limits`: —Å—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞ –Ω–∞ —Å–º–µ—Ç–∫–∞ (GET)

### –Ø–¥—Ä–æ –∑–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞–Ω–µ –∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ

- `src/sse/handlers/chat.ts`: –∞–Ω–∞–ª–∏–∑ –Ω–∞ –∑–∞—è–≤–∫–∞, –∫–æ–º–±–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞, —Ü–∏–∫—ä–ª –∑–∞ –∏–∑–±–æ—Ä –Ω–∞ –∞–∫–∞—É–Ω—Ç
- `open-sse/handlers/chatCore.ts`: –ø—Ä–µ–≤–æ–¥, –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–∏—Ç–µ–ª—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç/–æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –ø–æ—Ç–æ–∫–∞
- `open-sse/executors/*`: —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –∑–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –º—Ä–µ–∂–∞—Ç–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∞

### –†–µ–≥–∏—Å—Ç—ä—Ä –∑–∞ –ø—Ä–µ–≤–æ–¥–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä–∏ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∏

- `open-sse/translator/index.ts`: —Ä–µ–≥–∏—Å—Ç—ä—Ä –Ω–∞ –ø—Ä–µ–≤–æ–¥–∞—á–∞ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- –ó–∞—è–≤–∫–∞ –∑–∞ –ø—Ä–µ–≤–æ–¥–∞—á–∏: `open-sse/translator/request/*`
- –ü—Ä–µ–≤–æ–¥–∞—á–∏ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏: `open-sse/translator/response/*`
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∞: `open-sse/translator/formats.ts`

### –ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ

- `src/lib/localDb.ts`: –ø–æ—Å—Ç–æ—è–Ω–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è/—Å—ä—Å—Ç–æ—è–Ω–∏–µ
- `src/lib/usageDb.ts`: —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –Ω–∞ —Ç–µ–∫—É—â–∏ –∑–∞—è–≤–∫–∏

## –ü–æ–∫—Ä–∏—Ç–∏–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–∏—Ç–µ–ª –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫ (—Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –º–æ–¥–µ–ª)

–í—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫ –∏–º–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω –∏–∑–ø—ä–ª–Ω–∏—Ç–µ–ª, —Ä–∞–∑—à–∏—Ä—è–≤–∞—â `BaseExecutor` (–≤ `open-sse/executors/base.ts`), –∫–æ–π—Ç–æ –æ—Å–∏–≥—É—Ä—è–≤–∞ –∏–∑–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ URL –∞–¥—Ä–µ—Å, –∏–∑–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ –∑–∞–≥–ª–∞–≤–∫–∞, –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç —Å –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª–Ω–æ –∑–∞–±–∞–≤—è–Ω–µ, –∫—É–∫–∏—á–∫–∏ –∑–∞ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–∏ –¥–∞–Ω–Ω–∏ –∏ –º–µ—Ç–æ–¥–∞ –∑–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è `execute()`.

| –ò–∑–ø—ä–ª–Ω–∏—Ç–µ–ª            | –î–æ—Å—Ç–∞–≤—á–∏–∫(–∏)                                                                                                                                                 | –°–ø–µ—Ü–∏–∞–ª–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------- |
| `DefaultExecutor`     | OpenAI, Claude, Gemini, Qwen, iFlow, OpenRouter, GLM, Kimi, MiniMax, DeepSeek, Groq, xAI, Mistral, Perplexity, Together, Fireworks, Cerebras, Cohere, NVIDIA | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ–Ω URL/–∑–∞–≥–ª–∞–≤–∏–µ –∑–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫                                 |
| `AntigravityExecutor` | Google –ê–Ω—Ç–∏–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è                                                                                                                                        | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–∏ –Ω–æ–º–µ—Ä–∞ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∏/—Å–µ—Å–∏–∏, –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç —Å–ª–µ–¥ –∞–Ω–∞–ª–∏–∑ |
| `CodexExecutor`       | OpenAI Codex                                                                                                                                                 | –í–∫–∞—Ä–≤–∞ —Å–∏—Å—Ç–µ–º–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–∞–ª–∞–≥–∞ —É—Å–∏–ª–∏–µ –∑–∞ —Ä–∞–∑—Å—ä–∂–¥–µ–Ω–∏–µ                            |
| `CursorExecutor`      | –ö—É—Ä—Å–æ—Ä IDE                                                                                                                                                   | ConnectRPC –ø—Ä–æ—Ç–æ–∫–æ–ª, Protobuf –∫–æ–¥–∏—Ä–∞–Ω–µ, –ø–æ–¥–ø–∏—Å–≤–∞–Ω–µ –Ω–∞ –∑–∞—è–≤–∫–∞ —á—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–Ω–∞ —Å—É–º–∞    |
| `GithubExecutor`      | –ö–æ–ø–∏–ª–æ—Ç –Ω–∞ GitHub                                                                                                                                            | –û–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ Copilot token, –∑–∞–≥–ª–∞–≤–∫–∏, –∏–º–∏—Ç–∏—Ä–∞—â–∏ VSCode                            |
| `KiroExecutor`        | AWS CodeWhisperer/–ö–∏—Ä–æ                                                                                                                                       | AWS EventStream –¥–≤–æ–∏—á–µ–Ω —Ñ–æ—Ä–º–∞—Ç ‚Üí SSE –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ                                   |
| `GeminiCLIExecutor`   | Gemini CLI                                                                                                                                                   | –¶–∏–∫—ä–ª –Ω–∞ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ Google OAuth —Ç–æ–∫–µ–Ω                                          |

–í—Å–∏—á–∫–∏ –¥—Ä—É–≥–∏ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏ (–≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Å—ä–≤–º–µ—Å—Ç–∏–º–∏ –≤—ä–∑–ª–∏) –∏–∑–ø–æ–ª–∑–≤–∞—Ç `DefaultExecutor`.

## –ú–∞—Ç—Ä–∏—Ü–∞ –∑–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞

| –î–æ—Å—Ç–∞–≤—á–∏–∫         | –§–æ—Ä–º–∞—Ç          | –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ                 | –ü–æ—Ç–æ–∫            | –ù–µ–ø–æ—Ç–æ—á–Ω–æ | –û–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∞ | API –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ            |
| ----------------- | --------------- | ------------------------------ | ---------------- | --------- | --------------------- | ---------------------------- |
| –ö–ª–æ–¥              | –ö–ª–æ–¥            | API –∫–ª—é—á / OAuth               | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚ö†Ô∏è –°–∞–º–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä        |
| –ë–ª–∏–∑–Ω–∞—Ü–∏          | –±–ª–∏–∑–Ω–∞—Ü–∏        | API –∫–ª—é—á / OAuth               | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚ö†Ô∏è –û–±–ª–∞—á–Ω–∞ –∫–æ–Ω–∑–æ–ª–∞           |
| Gemini CLI        | gemini-cli      | OAuth                          | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚ö†Ô∏è –û–±–ª–∞—á–Ω–∞ –∫–æ–Ω–∑–æ–ª–∞           |
| –ê–Ω—Ç–∏–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è    | –∞–Ω—Ç–∏–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è  | OAuth                          | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚úÖ API —Å –ø—ä–ª–Ω–∞ –∫–≤–æ—Ç–∞         |
| OpenAI            | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –ö–æ–¥–µ–∫—Å            | openai-–æ—Ç–≥–æ–≤–æ—Ä–∏ | OAuth                          | ‚úÖ –ø—Ä–∏–Ω—É–¥–µ–Ω      | ‚ùå        | ‚úÖ                    | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞  |
| –ö–æ–ø–∏–ª–æ—Ç –Ω–∞ GitHub | openai          | OAuth + Copilot Token          | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚úÖ –ú–æ–º–µ–Ω—Ç–Ω–∏ —Å–Ω–∏–º–∫–∏ –Ω–∞ –∫–≤–æ—Ç–∏  |
| –ö—É—Ä—Å–æ—Ä            | –∫—É—Ä—Å–æ—Ä          | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–Ω–∞ —Å—É–º–∞ | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –ö–∏—Ä–æ              | –∫–∏—Ä–æ            | AWS SSO OIDC                   | ‚úÖ (EventStream) | ‚ùå        | ‚úÖ                    | ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ |
| –ö—É–µ–Ω              | openai          | OAuth                          | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚ö†Ô∏è –ü–æ –∑–∞—è–≤–∫–∞                 |
| iFlow             | openai          | OAuth (–æ—Å–Ω–æ–≤–µ–Ω)                | ‚úÖ               | ‚úÖ        | ‚úÖ                    | ‚ö†Ô∏è –ü–æ –∑–∞—è–≤–∫–∞                 |
| OpenRouter        | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| GLM/–ö–∏–º–∏/–ú–∏–Ω–∏–ú–∞–∫—Å | –ö–ª–æ–¥            | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| DeepSeek          | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| Groq              | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| xAI (Grok)        | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –ú–∏—Å—Ç—Ä–∞–ª           | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –ù–µ–¥–æ—É–º–µ–Ω–∏–µ        | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –ó–∞–µ–¥–Ω–æ AI         | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –§–æ–π–µ—Ä–≤–µ—Ä–∫–∏ AI     | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| –ú–æ–∑—ä—Ü–∏            | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| Cohere            | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |
| NVIDIA NIM        | openai          | API –∫–ª—é—á                       | ‚úÖ               | ‚úÖ        | ‚ùå                    | ‚ùå                           |

## –û–±—Ö–≤–∞—Ç –Ω–∞ –ø—Ä–µ–≤–æ–¥ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç

–û—Ç–∫—Ä–∏—Ç–∏—Ç–µ –∏–∑—Ö–æ–¥–Ω–∏ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∫–ª—é—á–≤–∞—Ç:

- `openai`
- `openai-responses`
- `claude`
- `gemini`

–¶–µ–ª–µ–≤–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∫–ª—é—á–≤–∞—Ç:

- OpenAI —á–∞—Ç/–û—Ç–≥–æ–≤–æ—Ä–∏
- –ö–ª–æ–¥
- Gemini/Gemini-CLI/–ê–Ω—Ç–∏–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–µ–Ω –ø–ª–∏–∫
- –ö–∏—Ä–æ
- –ö—É—Ä—Å–æ—Ä

–ü—Ä–µ–≤–æ–¥–∏—Ç–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç **OpenAI –∫–∞—Ç–æ —Ö—ä–± —Ñ–æ—Ä–º–∞—Ç** ‚Äî –≤—Å–∏—á–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–º–∏–Ω–∞–≤–∞—Ç –ø—Ä–µ–∑ OpenAI –∫–∞—Ç–æ –º–µ–∂–¥–∏–Ω–µ–Ω:

```
Source Format ‚Üí OpenAI (hub) ‚Üí Target Format
```

–ü—Ä–µ–≤–æ–¥–∏—Ç–µ —Å–µ –∏–∑–±–∏—Ä–∞—Ç –¥–∏–Ω–∞–º–∏—á–Ω–æ –≤—ä–∑ –æ—Å–Ω–æ–≤–∞ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–∞ –∏–∑—Ö–æ–¥–Ω–∏—è –ø–æ–ª–µ–∑–µ–Ω —Ç–æ–≤–∞—Ä –∏ —Ü–µ–ª–µ–≤–∏—è —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞.

–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —Å–ª–æ–µ–≤–µ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Ç—Ä—ä–±–æ–ø—Ä–æ–≤–æ–¥–∞ –∑–∞ –ø—Ä–µ–≤–æ–¥:

- **–î–µ—Ñ–µ–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∞** ‚Äî –ü—Ä–µ–º–∞—Ö–≤–∞ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ç–µ –ø–æ–ª–µ—Ç–∞ –æ—Ç –æ—Ç–≥–æ–≤–æ—Ä–∏—Ç–µ –≤—ä–≤ —Ñ–æ—Ä–º–∞—Ç OpenAI (–∫–∞–∫—Ç–æ —Å—Ç—Ä–∏–π–º–∏–Ω–≥, —Ç–∞–∫–∞ –∏ –±–µ–∑ —Å—Ç—Ä–∏–π–º–∏–Ω–≥), –∑–∞ –¥–∞ —Å–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ —Å—Ç—Ä–∏–∫—Ç–Ω–æ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å SDK
- **–ù–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–æ–ª—è—Ç–∞** ‚Äî –ü—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ `developer` ‚Üí `system` –∑–∞ —Ü–µ–ª–∏, –∫–æ–∏—Ç–æ –Ω–µ —Å–∞ OpenAI; –æ–±–µ–¥–∏–Ω—è–≤–∞ `system` ‚Üí `user` –∑–∞ –º–æ–¥–µ–ª–∏, –∫–æ–∏—Ç–æ –æ—Ç—Ö–≤—ä—Ä–ª—è—Ç —Å–∏—Å—Ç–µ–º–Ω–∞—Ç–∞ —Ä–æ–ª—è (GLM, ERNIE)
- **–ò–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –º–∏—Å–ª–µ–Ω –µ—Ç–∏–∫–µ—Ç** ‚Äî –ê–Ω–∞–ª–∏–∑–∏—Ä–∞ `<think>...</think>` –±–ª–æ–∫–æ–≤–µ –æ—Ç —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –≤ –ø–æ–ª–µ `reasoning_content`
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω –∏–∑—Ö–æ–¥** ‚Äî –ü—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ OpenAI `response_format.json_schema` –≤ `responseMimeType` + `responseSchema` –Ω–∞ Gemini

## –ü–æ–¥–¥—ä—Ä–∂–∞–Ω–∏ API –∫—Ä–∞–π–Ω–∏ —Ç–æ—á–∫–∏

| –ö—Ä–∞–π–Ω–∞ —Ç–æ—á–∫–∞                                       | –§–æ—Ä–º–∞—Ç                    | –ú–∞–Ω–∏–ø—É–ª–∞—Ç–æ—Ä                                                        |
| -------------------------------------------------- | ------------------------- | ------------------------------------------------------------------ |
| `POST /v1/chat/completions`                        | OpenAI —á–∞—Ç                | `src/sse/handlers/chat.ts`                                         |
| `POST /v1/messages`                                | –°—ä–æ–±—â–µ–Ω–∏—è –Ω–∞ –ö–ª–æ–¥         | –°—ä—â–∏—è—Ç –º–∞–Ω–∏–ø—É–ª–∞—Ç–æ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–∞–∑–ø–æ–∑–Ω–∞—Ç)                         |
| `POST /v1/responses`                               | OpenAI –æ—Ç–≥–æ–≤–æ—Ä–∏           | `open-sse/handlers/responsesHandler.ts`                            |
| `POST /v1/embeddings`                              | OpenAI –≤–≥—Ä–∞–∂–¥–∞–Ω–∏—è         | `open-sse/handlers/embeddings.ts`                                  |
| `GET /v1/embeddings`                               | –°–ø–∏—Å—ä–∫ –Ω–∞ –º–æ–¥–µ–ª–∏          | API –º–∞—Ä—à—Ä—É—Ç                                                        |
| `POST /v1/images/generations`                      | OpenAI –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è        | `open-sse/handlers/imageGeneration.ts`                             |
| `GET /v1/images/generations`                       | –°–ø–∏—Å—ä–∫ –Ω–∞ –º–æ–¥–µ–ª–∏          | API –º–∞—Ä—à—Ä—É—Ç                                                        |
| `POST /v1/providers/{provider}/chat/completions`   | OpenAI —á–∞—Ç                | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫ —Å –≤–∞–ª–∏–¥–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª             |
| `POST /v1/providers/{provider}/embeddings`         | OpenAI –≤–≥—Ä–∞–∂–¥–∞–Ω–∏—è         | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫ —Å –≤–∞–ª–∏–¥–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª             |
| `POST /v1/providers/{provider}/images/generations` | OpenAI –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è        | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫ —Å –≤–∞–ª–∏–¥–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª             |
| `POST /v1/messages/count_tokens`                   | –ö–ª–æ–¥ –¢–æ–∫–µ–Ω –ë—Ä–æ–π           | API –º–∞—Ä—à—Ä—É—Ç                                                        |
| `GET /v1/models`                                   | –°–ø–∏—Å—ä–∫ —Å –º–æ–¥–µ–ª–∏ –Ω–∞ OpenAI | API –º–∞—Ä—à—Ä—É—Ç (—á–∞—Ç + –≤–≥—Ä–∞–∂–¥–∞–Ω–µ + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ + –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –º–æ–¥–µ–ª–∏) |
| `GET /api/models/catalog`                          | –ö–∞—Ç–∞–ª–æ–≥                   | –í—Å–∏—á–∫–∏ –º–æ–¥–µ–ª–∏, –≥—Ä—É–ø–∏—Ä–∞–Ω–∏ –ø–æ –¥–æ—Å—Ç–∞–≤—á–∏–∫ + —Ç–∏–ø                        |
| `POST /v1beta/models/*:streamGenerateContent`      | –†–æ–¥–æ–º –æ—Ç –ë–ª–∏–∑–Ω–∞—Ü–∏         | API –º–∞—Ä—à—Ä—É—Ç                                                        |
| `GET/PUT/DELETE /api/settings/proxy`               | –ü—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è       | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –º—Ä–µ–∂–æ–≤ –ø—Ä–æ–∫—Å–∏                                      |
| `POST /api/settings/proxy/test`                    | –ü—Ä–æ–∫—Å–∏ –≤—Ä—ä–∑–∫–∞             | –ö—Ä–∞–π–Ω–∞ —Ç–æ—á–∫–∞ –Ω–∞ –ø—Ä–æ–∫—Å–∏ —Ç–µ—Å—Ç –∑–∞ –∏–∑–ø—Ä–∞–≤–Ω–æ—Å—Ç/—Å–≤—ä—Ä–∑–∞–Ω–æ—Å—Ç               |
| `GET/POST/DELETE /api/provider-models`             | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –º–æ–¥–µ–ª–∏    | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥–µ–ª–∏ –∑–∞ –≤—Å–µ–∫–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫            |

## –û–±—Ö–æ–¥–µ–Ω –º–∞–Ω–∏–ø—É–ª–∞—Ç–æ—Ä

–û–±—Ö–æ–¥–Ω–∏—è—Ç –º–∞–Ω–∏–ø—É–ª–∞—Ç–æ—Ä (`open-sse/utils/bypassHandler.ts`) –ø—Ä–∏—Ö–≤–∞—â–∞ –∏–∑–≤–µ—Å—Ç–Ω–∏ –∑–∞—è–≤–∫–∏ –∑–∞ ‚Äû–∏–∑—Ö–≤—ä—Ä–ª—è–Ω–µ‚Äú –æ—Ç Claude CLI ‚Äî –ø–∏–Ω–≥–æ–≤–µ –∑–∞ –∑–∞–≥—Ä—è–≤–∞–Ω–µ, –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –∑–∞–≥–ª–∞–≤–∏—è –∏ –ø—Ä–µ–±—Ä–æ—è–≤–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∏ ‚Äî –∏ –≤—Ä—ä—â–∞ **—Ñ–∞–ª—à–∏–≤ –æ—Ç–≥–æ–≤–æ—Ä**, –±–µ–∑ –¥–∞ –∫–æ–Ω—Å—É–º–∏—Ä–∞ —Ç–æ–∫–µ–Ω–∏ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –Ω–∞–≥–æ—Ä–µ –ø–æ –≤–µ—Ä–∏–≥–∞—Ç–∞. –¢–æ–≤–∞ —Å–µ –∑–∞–¥–µ–π—Å—Ç–≤–∞ —Å–∞–º–æ –∫–æ–≥–∞—Ç–æ `User-Agent` —Å—ä–¥—ä—Ä–∂–∞ `claude-cli`.

## –¢—Ä—ä–±–æ–ø—Ä–æ–≤–æ–¥ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞ –∑–∞—è–≤–∫–∏

–†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ä—Ç –Ω–∞ –∑–∞—è–≤–∫–∏ (`open-sse/utils/requestLogger.ts`) –æ—Å–∏–≥—É—Ä—è–≤–∞ 7-–µ—Ç–∞–ø–µ–Ω –∫–æ–Ω–≤–µ–π–µ—Ä –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏, –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–Ω –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ, –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω —á—Ä–µ–∑ `ENABLE_REQUEST_LOGS=true`:

```
1_req_client.json ‚Üí 2_req_source.json ‚Üí 3_req_openai.json ‚Üí 4_req_target.json
‚Üí 5_res_provider.txt ‚Üí 6_res_openai.txt ‚Üí 7_res_client.txt
```

–§–∞–π–ª–æ–≤–µ—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç –≤ `<repo>/logs/<session>/` –∑–∞ –≤—Å—è–∫–∞ —Å–µ—Å–∏—è –Ω–∞ –∑–∞—è–≤–∫–∞.

## –†–µ–∂–∏–º–∏ –Ω–∞ –æ—Ç–∫–∞–∑ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç

## 1) –ù–∞–ª–∏—á–Ω–æ—Å—Ç –Ω–∞ –∞–∫–∞—É–Ω—Ç/–¥–æ—Å—Ç–∞–≤—á–∏–∫

- –∏–∑—á–∞–∫–≤–∞–Ω–µ –Ω–∞ –∞–∫–∞—É–Ω—Ç–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ –ø—Ä–∏ –ø—Ä–µ—Ö–æ–¥–Ω–∏/—Å–∫–æ—Ä–æ—Å—Ç–Ω–∏/—É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏—Ç–µ–ª–Ω–∏ –≥—Ä–µ—à–∫–∏
- —Ä–µ–∑–µ—Ä–≤–µ–Ω –∞–∫–∞—É–Ω—Ç –ø—Ä–µ–¥–∏ –Ω–µ—É—Å–ø–µ—à–Ω–∞ –∑–∞—è–≤–∫–∞
- —Ä–µ–∑–µ—Ä–≤–µ–Ω –∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω –º–æ–¥–µ–ª, –∫–æ–≥–∞—Ç–æ –ø—ä—Ç—è—Ç –Ω–∞ —Ç–µ–∫—É—â–∏—è –º–æ–¥–µ–ª/–¥–æ—Å—Ç–∞–≤—á–∏–∫ –µ –∏–∑—á–µ—Ä–ø–∞–Ω

## 2) –ò–∑—Ç–∏—á–∞–Ω–µ –Ω–∞ —Ç–æ–∫–µ–Ω–∞

- –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç –∑–∞ –æ–ø—Ä–µ—Å–Ω—è–≤–∞—â–∏ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏
- 401/403 –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç —Å–ª–µ–¥ –æ–ø–∏—Ç –∑–∞ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ –≤ –æ—Å–Ω–æ–≤–Ω–∏—è –ø—ä—Ç

## 3) –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç –Ω–∞ –ø–æ—Ç–æ–∫–∞

- –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –Ω–∞ –ø–æ—Ç–æ—Ü–∏, –∫–æ–π—Ç–æ —Å–µ –∏–∑–∫–ª—é—á–≤–∞
- –ø–æ—Ç–æ–∫ –∑–∞ –ø—Ä–µ–≤–æ–¥ —Å –ø—Ä–æ–º–∏–≤–∞–Ω–µ –≤ –∫—Ä–∞—è –Ω–∞ –ø–æ—Ç–æ–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ `[DONE]`
- —Ä–µ–∑–µ—Ä–≤–Ω–∞ –æ—Ü–µ–Ω–∫–∞ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ, –∫–æ–≥–∞—Ç–æ –ª–∏–ø—Å–≤–∞—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞

## 4) –í–ª–æ—à–∞–≤–∞–Ω–µ –Ω–∞ –æ–±–ª–∞—á–Ω–∞—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

- –ø–æ—è–≤—è–≤–∞—Ç —Å–µ –≥—Ä–µ—à–∫–∏ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ, –Ω–æ –ª–æ–∫–∞–ª–Ω–æ—Ç–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞
- –ø–ª–∞–Ω–∏—Ä–æ–≤—á–∏–∫—ä—Ç –∏–º–∞ –ª–æ–≥–∏–∫–∞ —Å –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω –æ–ø–∏—Ç, –Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Ç–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –≤ –º–æ–º–µ–Ω—Ç–∞ –∏–∑–≤–∏–∫–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ —Å –µ–¥–∏–Ω –æ–ø–∏—Ç –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ

## 5) –¶—è–ª–æ—Å—Ç –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ

- –ú–∏–≥—Ä–∞—Ü–∏—è/–ø–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ DB —Ñ–æ—Ä–º–∞ –∑–∞ –ª–∏–ø—Å–≤–∞—â–∏ –∫–ª—é—á–æ–≤–µ
- –ø–æ–≤—Ä–µ–¥–µ–Ω–∏ –ø—Ä–µ–¥–ø–∞–∑–Ω–∏ –º–µ—Ä–∫–∏ –∑–∞ –Ω—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ JSON –∑–∞ localDb –∏ usageDb

## –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏ —Å–∏–≥–Ω–∞–ª–∏

–ò–∑—Ç–æ—á–Ω–∏—Ü–∏ –Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:

- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –Ω–∞ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ –æ—Ç `src/sse/utils/logger.ts`
- –∞–≥—Ä–µ–≥–∞—Ç–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –∑–∞—è–≤–∫–∞ –≤ `usage.json`
- –≤–ª–∏–∑–∞–Ω–µ –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∞ –∑–∞—è–≤–∫–∞ `log.txt`
- –Ω–µ–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –¥—ä–ª–±–æ–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –∑–∞ –∑–∞—è–≤–∫–∞/–ø—Ä–µ–≤–æ–¥ –ø–æ–¥ `logs/`, –∫–æ–≥–∞—Ç–æ `ENABLE_REQUEST_LOGS=true`
- –∫—Ä–∞–π–Ω–∏ —Ç–æ—á–∫–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (`/api/usage/*`) –∑–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –Ω–∞ UI

## –ì—Ä–∞–Ω–∏—Ü–∏, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏ –∫—ä–º —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞

- JWT —Ç–∞–π–Ω–∞ (`JWT_SECRET`) –∑–∞—â–∏—Ç–∞–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞—Ç–∞/–ø–æ–¥–ø–∏—Å–≤–∞–Ω–µ—Ç–æ –Ω–∞ –±–∏—Å–∫–≤–∏—Ç–∫–∏—Ç–µ –Ω–∞ —Ç–∞–±–ª–æ—Ç–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ü—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–∞—Ç–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞ –ø–∞—Ä–æ–ª–∞ (`INITIAL_PASSWORD`, –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ `123456`) —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –∑–∞–º–µ–Ω–µ–Ω–∞ –ø—Ä–∏ —Ä–µ–∞–ª–Ω–∏ –≤–Ω–µ–¥—Ä—è–≤–∞–Ω–∏—è
- API –∫–ª—é—á HMAC secret (`API_KEY_SECRET`) –∑–∞—â–∏—Ç–∞–≤–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—è –ª–æ–∫–∞–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –Ω–∞ API –∫–ª—é—á
- –¢–∞–π–Ω–∏—Ç–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏–∫–∞ (API –∫–ª—é—á–æ–≤–µ/—Ç–æ–∫–µ–Ω–∏) —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –≤ –ª–æ–∫–∞–ª–Ω–∞—Ç–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ –∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–∞—Ç –∑–∞—â–∏—Ç–µ–Ω–∏ –Ω–∞ –Ω–∏–≤–æ —Ñ–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞
- –ö—Ä–∞–π–Ω–∏—Ç–µ —Ç–æ—á–∫–∏ –∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ –≤ –æ–±–ª–∞–∫ —Ä–∞–∑—á–∏—Ç–∞—Ç –Ω–∞ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ –Ω–∞ API –∫–ª—é—á + —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –Ω–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞ –º–∞—à–∏–Ω–∞

## –û–∫–æ–ª–Ω–∞ —Å—Ä–µ–¥–∞ –∏ –º–∞—Ç—Ä–∏—Ü–∞ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ

–ü—Ä–æ–º–µ–Ω–ª–∏–≤–∏—Ç–µ –Ω–∞ —Å—Ä–µ–¥–∞—Ç–∞, –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ –æ—Ç –∫–æ–¥–∞:

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ/—É–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ: `JWT_SECRET`, `INITIAL_PASSWORD`
- –°—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ: `DATA_DIR`
- –°—ä–≤–º–µ—Å—Ç–∏–º–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –≤—ä–∑–µ–ª: `ALLOW_MULTI_CONNECTIONS_PER_COMPAT_NODE`
- –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –æ—Ç–º—è–Ω–∞ –Ω–∞ –±–∞–∑–∞—Ç–∞ –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ (Linux/macOS, –∫–æ–≥–∞—Ç–æ `DATA_DIR` –Ω–µ –µ –∑–∞–¥–∞–¥–µ–Ω): `XDG_CONFIG_HOME`
- –•–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞: `API_KEY_SECRET`, `MACHINE_ID_SALT`
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–µ: `ENABLE_REQUEST_LOGS`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω–µ/–æ–±–ª–∞—á–Ω–æ URL –∞–¥—Ä–µ—Å–∏—Ä–∞–Ω–µ: `NEXT_PUBLIC_BASE_URL`, `NEXT_PUBLIC_CLOUD_URL`
- –ò–∑—Ö–æ–¥—è—â –ø—Ä–æ–∫—Å–∏: `HTTP_PROXY`, `HTTPS_PROXY`, `ALL_PROXY`, `NO_PROXY` –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∏ —Å –º–∞–ª–∫–∏ –±—É–∫–≤–∏
- –§–ª–∞–≥–æ–≤–µ –∑–∞ —Ñ—É–Ω–∫—Ü–∏—è SOCKS5: `ENABLE_SOCKS5_PROXY`, `NEXT_PUBLIC_ENABLE_SOCKS5_PROXY`
- –ü–æ–º–æ—â–Ω–∏—Ü–∏ –∑–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞/–≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ (–Ω–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è): `APPDATA`, `NODE_ENV`, `PORT`, `HOSTNAME`

## –ò–∑–≤–µ—Å—Ç–Ω–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∏ –±–µ–ª–µ–∂–∫–∏

1. `usageDb` –∏ `localDb` —Å–µ–≥–∞ —Å–ø–æ–¥–µ–ª—è—Ç –µ–¥–Ω–∞ –∏ —Å—ä—â–∞ –æ—Å–Ω–æ–≤–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –∑–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (`DATA_DIR` -> `XDG_CONFIG_HOME/omniroute` -> `~/.omniroute`) —Å –º–∏–≥—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –Ω–∞—Å–ª–µ–¥–µ–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ.
2. `/api/v1/route.ts` –≤—Ä—ä—â–∞ —Å–ø–∏—Å—ä–∫ —Å—ä—Å —Å—Ç–∞—Ç–∏—á–µ–Ω –º–æ–¥–µ–ª –∏ –Ω–µ –µ –æ—Å–Ω–æ–≤–Ω–∏—è—Ç –∏–∑—Ç–æ—á–Ω–∏–∫ –Ω–∞ –º–æ–¥–µ–ª–∏, –∏–∑–ø–æ–ª–∑–≤–∞–Ω –æ—Ç `/v1/models`.
3. Request logger –∑–∞–ø–∏—Å–≤–∞ –ø—ä–ª–Ω–∏ –∑–∞–≥–ª–∞–≤–∫–∏/—Ç—è–ª–æ, –∫–æ–≥–∞—Ç–æ –µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ; —Ç—Ä–µ—Ç–∏—Ä–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫–∞—Ç–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–∞.
4. –ü–æ–≤–µ–¥–µ–Ω–∏–µ—Ç–æ –≤ –æ–±–ª–∞–∫–∞ –∑–∞–≤–∏—Å–∏ –æ—Ç –ø—Ä–∞–≤–∏–ª–Ω–∏—è `NEXT_PUBLIC_BASE_URL` –∏ –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç—Ç–∞ –Ω–∞ –∫—Ä–∞–π–Ω–∞—Ç–∞ —Ç–æ—á–∫–∞ –Ω–∞ –æ–±–ª–∞–∫–∞.
5. –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ `open-sse/` –µ –ø—É–±–ª–∏–∫—É–≤–∞–Ω–∞ –∫–∞—Ç–æ `@omniroute/open-sse` **npm workspace package**. –ò–∑—Ö–æ–¥–Ω–∏—è—Ç –∫–æ–¥ –≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ —á—Ä–µ–∑ `@omniroute/open-sse/...` (—Ä–∞–∑—Ä–µ—à–µ–Ω–æ –æ—Ç Next.js `transpilePackages`). –ü—ä—Ç–∏—â–∞—Ç–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ –≤ —Ç–æ–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç –≤—Å–µ –æ—â–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –∏–º–µ—Ç–æ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ `open-sse/` –∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç.
6. –î–∏–∞–≥—Ä–∞–º–∏—Ç–µ –≤ —Ç–∞–±–ª–æ—Ç–æ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç **Recharts** (–±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ SVG) –∑–∞ –¥–æ—Å—Ç—ä–ø–Ω–∏, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏ –∞–Ω–∞–ª–∏—Ç–∏—á–Ω–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—ä–ª–±–æ–≤–∏–¥–Ω–∏ –¥–∏–∞–≥—Ä–∞–º–∏ –Ω–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –º–æ–¥–µ–ª–∞, —Ç–∞–±–ª–∏—Ü–∏ —Å —Ä–∞–∑–±–∏–≤–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏—Ç–µ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∏ –Ω–∞ —É—Å–ø–µ—Ö).
7. E2E —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç **Playwright** (`tests/e2e/`), –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç —Å–µ —á—Ä–µ–∑ `npm run test:e2e`. –ú–æ–¥—É–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç **Node.js test runner** (`tests/unit/`), –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç —Å–µ —á—Ä–µ–∑ `npm run test:plan3`. –ò–∑—Ö–æ–¥–Ω–∏—è—Ç –∫–æ–¥ –ø–æ–¥ `src/` –µ **TypeScript** (`.ts`/`.tsx`); —Ä–∞–±–æ—Ç–Ω–æ—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ `open-sse/` –æ—Å—Ç–∞–≤–∞ JavaScript (`.js`).
8. –°—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –µ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∞ –≤ 5 —Ä–∞–∑–¥–µ–ª–∞: –°–∏–≥—É—Ä–Ω–æ—Å—Ç, –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞–Ω–µ (6 –≥–ª–æ–±–∞–ª–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: –ø—ä—Ä–≤–æ –ø–æ–ø—ä–ª–≤–∞–Ω–µ, –∫—Ä—ä–≥—ä–ª-—Ä–æ–±–∏–Ω, p2c, –ø—Ä–æ–∏–∑–≤–æ–ª–Ω–∞, –Ω–∞–π-–º–∞–ª–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∞, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑—Ö–æ–¥–∏—Ç–µ), –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞ –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ, –ø—Ä–µ–∫—ä—Å–≤–∞—á, –ø–æ–ª–∏—Ç–∏–∫–∏), AI (–º–∏—Å–ª–µ—â –±—é–¥–∂–µ—Ç, —Å–∏—Å—Ç–µ–º–Ω–∞ –ø–æ–¥–∫–∞–Ω–∞, –∫–µ—à –∑–∞ –ø–æ–¥–∫–∞–Ω–∞), –†–∞–∑—à–∏—Ä–µ–Ω–∏ (–ø—Ä–æ–∫—Å–∏).

## –ö–æ–Ω—Ç—Ä–æ–ª–µ–Ω —Å–ø–∏—Å—ä–∫ –∑–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞

- –°—ä–∑–¥–∞–≤–∞–Ω–µ –æ—Ç –∏–∑—Ç–æ—á–Ω–∏–∫: `npm run build`
- –ò–∑–≥—Ä–∞–∂–¥–∞–Ω–µ –Ω–∞ Docker –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `docker build -t omniroute .`
- –°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ —É—Å–ª—É–≥–∞—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ:
- `GET /api/settings`
- `GET /api/v1/models`
- CLI —Ü–µ–ª–µ–≤–∏ –±–∞–∑–æ–≤ URL —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ `http://<host>:20128/v1`, –∫–æ–≥–∞—Ç–æ `PORT=20128`
